<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.5.54">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="author" content="Madiyar Aitbayev">
<meta name="dcterms.date" content="2025-01-13">

<title>Dot Product Intuition – Madiyar’s Page</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { display: inline-block; text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="../../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../../site_libs/quarto-nav/headroom.min.js"></script>
<script src="../../site_libs/clipboard/clipboard.min.js"></script>
<script src="../../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../../site_libs/quarto-search/fuse.min.js"></script>
<script src="../../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../../">
<script src="../../site_libs/quarto-html/quarto.js"></script>
<script src="../../site_libs/quarto-html/popper.min.js"></script>
<script src="../../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../../site_libs/quarto-html/anchor.min.js"></script>
<link href="../../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../../site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="../../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../../site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>
<script async="" src="https://www.googletagmanager.com/gtag/js?id=G-XDL07RCJG6"></script>

<script type="text/javascript">

window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'G-XDL07RCJG6', { 'anonymize_ip': true});
</script>
<script type="module" src="../../site_libs/quarto-ojs/quarto-ojs-runtime.js"></script>
<link href="../../site_libs/quarto-ojs/quarto-ojs.css" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/polyfill/v3/polyfill.min.js?features=es6"></script>
  <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml-full.js" type="text/javascript"></script>

<script type="text/javascript">
const typesetMath = (el) => {
  if (window.MathJax) {
    // MathJax Typeset
    window.MathJax.typeset([el]);
  } else if (window.katex) {
    // KaTeX Render
    var mathElements = el.getElementsByClassName("math");
    var macros = [];
    for (var i = 0; i < mathElements.length; i++) {
      var texText = mathElements[i].firstChild;
      if (mathElements[i].tagName == "SPAN") {
        window.katex.render(texText.data, mathElements[i], {
          displayMode: mathElements[i].classList.contains('display'),
          throwOnError: false,
          macros: macros,
          fleqn: false
        });
      }
    }
  }
}
window.Quarto = {
  typesetMath
};
</script>

<link rel="stylesheet" href="../../styles.css">
</head>

<body class="nav-fixed fullcontent">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top quarto-banner">
    <nav class="navbar navbar-expand-lg " data-bs-theme="dark">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container mx-auto">
    <a class="navbar-brand" href="../../index.html">
    <span class="navbar-title">Madiyar’s Page</span>
    </a>
  </div>
            <div id="quarto-search" class="" title="Search"></div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" role="menu" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll ms-auto">
  <li class="nav-item">
    <a class="nav-link" href="../../about.html"> 
<span class="menu-text">About</span></a>
  </li>  
  <li class="nav-item compact">
    <a class="nav-link" href="../../index.xml"> <i class="bi bi-rss" role="img">
</i> 
<span class="menu-text"></span></a>
  </li>  
  <li class="nav-item compact">
    <a class="nav-link" href="https://x.com/aitbayev"> <i class="bi bi-twitter-x" role="img">
</i> 
<span class="menu-text"></span></a>
  </li>  
  <li class="nav-item compact">
    <a class="nav-link" href="https://github.com/maitbayev"> <i class="bi bi-github" role="img">
</i> 
<span class="menu-text"></span></a>
  </li>  
  <li class="nav-item compact">
    <a class="nav-link" href="https://t.me/swemanml"> <i class="bi bi-telegram" role="img">
</i> 
<span class="menu-text"></span></a>
  </li>  
</ul>
          </div> <!-- /navcollapse -->
            <div class="quarto-navbar-tools">
</div>
      </div> <!-- /container-fluid -->
    </nav>
</header>
<!-- content -->
<header id="title-block-header" class="quarto-title-block default page-columns page-full">
  <div class="quarto-title-banner page-columns page-full">
    <div class="quarto-title column-body">
      <h1 class="title">Dot Product Intuition</h1>
                                <div class="quarto-categories">
                <div class="quarto-category">math</div>
              </div>
                  </div>
  </div>
    
  
  <div class="quarto-title-meta">

      <div>
      <div class="quarto-title-meta-heading">Author</div>
      <div class="quarto-title-meta-contents">
               <p>Madiyar Aitbayev </p>
            </div>
    </div>
      
      <div>
      <div class="quarto-title-meta-heading">Published</div>
      <div class="quarto-title-meta-contents">
        <p class="date">January 13, 2025</p>
      </div>
    </div>
    
      
    </div>
    
  
  </header><div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
<!-- margin-sidebar -->
    
<!-- main -->
<main class="content quarto-banner-title-block" id="quarto-document-content">





<section id="dot-product-intuition" class="level1">
<h1>Dot Product Intuition</h1>
<section id="introduction" class="level2">
<h2 class="anchored" data-anchor-id="introduction">Introduction</h2>
<p>The <strong>dot product</strong> (or <strong>scalar product</strong>) is a simple yet powerful operation that is used in many places in Machine Learning and other fields. In this post, I will explain the geometric intuition behind the dot product. You need to have a basic grasp of trigonometry and vector algebra to follow this post.</p>
<p>I will need this explanation for my future posts.</p>
<p>Feel free to ask questions on <a href="https://t.me/swemanml">my telegram channel</a></p>
</section>
<section id="recap" class="level2">
<h2 class="anchored" data-anchor-id="recap">Recap</h2>
<p>More beginner friendly explanations are available in the following resources:</p>
<ul>
<li><a href="https://en.wikipedia.org/wiki/Dot_product">en.wikipedia.org/wiki/Dot_product</a></li>
<li><a href="https://brilliant.org/wiki/dot-product-definition">brilliant.org/wiki/dot-product-definition</a></li>
<li><a href="https://betterexplained.com/articles/vector-calculus-understanding-the-dot-product/">betterexplained.com/articles/vector-calculus-understanding-the-dot-product</a></li>
</ul>
<p>Feel free to checkout the above or other resources first.</p>
<p>Assume we have two vectors <span class="math inline">\(\textbf{a}=[a_1, a_2, \cdots, a_n]\)</span> and <span class="math inline">\(\textbf{b} = [b_1, b_2, \cdots, b_n]\)</span>, then there are two definitions of the dot product: <strong>algebraic</strong> and <strong>geometric</strong>.</p>
<section id="algebraic-definition" class="level3">
<h3 class="anchored" data-anchor-id="algebraic-definition">Algebraic definition</h3>
<p>The dot product of <span class="math inline">\(\textbf{a}\)</span> and <span class="math inline">\(\textbf{b}\)</span> is:</p>
<p><span class="math display">\[
\textbf{a} \cdot \textbf{b} = \sum_{i=1}^n{a_ib_i} = a_1b_1+a_2b_2+\cdots+a_nb_n
\]</span></p>
</section>
<section id="geometric-definition" class="level3">
<h3 class="anchored" data-anchor-id="geometric-definition">Geometric definition</h3>
<p>The dot product of <span class="math inline">\(\textbf{a}\)</span> and <span class="math inline">\(\textbf{b}\)</span> is: <span class="math display">\[
\textbf{a} \cdot \textbf{b} = \|\mathbf{a}\|\|\mathbf{b}\|\cos \theta
\]</span></p>
<p>where <span class="math inline">\(\theta\)</span> is the angle between <strong>a</strong> and <strong>b</strong> and <span class="math inline">\(\|\textbf{a}\|\)</span> is the magnitude of a vector <strong>a</strong>.</p>
<div class="callout callout-style-default callout-note callout-titled">
<div class="callout-header d-flex align-content-center" data-bs-toggle="collapse" data-bs-target=".callout-1-contents" aria-controls="callout-1" aria-expanded="false" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Geometric properties
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-1" class="callout-1-contents callout-collapse collapse">
<div class="callout-body-container callout-body">
<p>The geometric definition gives us a few useful properties:</p>
<ul>
<li>The dot product is zero when <strong>a</strong> and <strong>b</strong> are orthogonal, since <span class="math inline">\(\cos(90 \degree) = 0\)</span></li>
<li>The dot product is positive for acute angles and negative for obtuse, e.g., <span class="math inline">\(\cos(45\degree)\)</span> or <span class="math inline">\(\cos(89\degree)\)</span> are positive but <span class="math inline">\(\cos(180\degree), \cos(91\degree)\)</span> are negative.</li>
<li>We can find the angle between vectors by <span class="math inline">\(\theta = \arccos(\frac{\textbf{a} \cdot \textbf{b}}{\|\mathbf{a}\|\|\mathbf{b}\|})\)</span>. A picture from Wikipedia:</li>
</ul>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="https://upload.wikimedia.org/wikipedia/commons/7/76/Inner-product-angle.svg" class="img-fluid figure-img" width="300"></p>
<figcaption>Source Wikipedia</figcaption>
</figure>
</div>
</div>
</div>
</div>
</section>
<section id="equivalence" class="level3">
<h3 class="anchored" data-anchor-id="equivalence">Equivalence?</h3>
<p>Wait, how are the two dot product definitions the same? How is <span class="math inline">\(cos( \theta)\)</span> related to such a straightforward sum of components? A few questions I asked when I first encountered the dot product. I accepted the fact and moved on with my life until today. I will try to understand myself and also explain by interactive visualizations.</p>
</section>
</section>
<section id="explanation" class="level2">
<h2 class="anchored" data-anchor-id="explanation">Explanation</h2>
<p>Let’s first simplify the problem as much as possible. Once we build up an intuition for simpler cases, we can come back and try to understand the general cases.</p>
<section id="simplified-version" class="level3">
<h3 class="anchored" data-anchor-id="simplified-version">Simplified version</h3>
<p>First, we will only consider the <span class="math inline">\(n=2\)</span> case. Assume that we have 2D vectors: <span class="math inline">\(\textbf{a}=[a_x, a_y]\)</span> and <span class="math inline">\(\textbf{b}=[b_x, b_y]\)</span> with the dot product:</p>
<p><span class="math display">\[
\textbf{a} \cdot \textbf{b} = a_xb_x+a_yb_y=\|\textbf{a}\|\|\textbf{b}\|\cos \theta
\]</span></p>
<p>where <span class="math inline">\(\|\textbf{a}\|=\sqrt{a_x^2+a_y^2}\)</span> is the length of the vector and <span class="math inline">\(\theta\)</span> is the angle between the vectors.</p>
<p>Second, scaling either <span class="math inline">\(\textbf{a}\)</span> or <span class="math inline">\(\textbf{b}\)</span> by a real number <span class="math inline">\(k\)</span> does not invalidate the dot product equivalence. Let’s say we scale <span class="math inline">\(\textbf{b}\)</span> by <span class="math inline">\(k\)</span>, then:</p>
<p><span class="math display">\[
\textbf{a} \cdot (k \textbf{b}) = a_x(kb_x)+a_y(kb_y)=\|\textbf{a}\|k\|\textbf{b}\|\cos \theta
\]</span></p>
<p>With the above, we can simplify further by constraining <span class="math inline">\(\|\textbf{b}\| = 1\)</span>. If the equivalence holds for <span class="math inline">\(\|\textbf{b}\| = 1\)</span>, then it holds for any <span class="math inline">\(\|k\textbf{b}\|\)</span>.</p>
<div class="cell">
<div class="sourceCode cell-code hidden" id="cb1" data-startfrom="91" data-source-offset="0"><pre class="sourceCode js code-with-copy"><code class="sourceCode javascript" style="counter-reset: source-line 90;"><span id="cb1-91"><a href="#cb1-91" aria-hidden="true" tabindex="-1"></a>JXG <span class="op">=</span> <span class="cf">await</span> <span class="pp">require</span>(<span class="st">'https://cdnjs.cloudflare.com/ajax/libs/jsxgraph/1.10.1/jsxgraphcore.js'</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<div id="ojs-cell-1" data-nodetype="declaration">

</div>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code hidden" id="cb2" data-startfrom="96" data-source-offset="0"><pre class="sourceCode js code-with-copy"><code class="sourceCode javascript" style="counter-reset: source-line 95;"><span id="cb2-96"><a href="#cb2-96" aria-hidden="true" tabindex="-1"></a><span class="kw">function</span> <span class="fu">board_div</span>(name<span class="op">,</span> width<span class="op">=</span><span class="dv">500</span>) {</span>
<span id="cb2-97"><a href="#cb2-97" aria-hidden="true" tabindex="-1"></a>  <span class="cf">return</span> <span class="fu">html</span><span class="vs">`&lt;div </span></span>
<span id="cb2-98"><a href="#cb2-98" aria-hidden="true" tabindex="-1"></a><span class="vs">    id=</span><span class="sc">${</span>name<span class="sc">}</span><span class="vs"> </span></span>
<span id="cb2-99"><a href="#cb2-99" aria-hidden="true" tabindex="-1"></a><span class="vs">    style='max-width:</span><span class="sc">${</span>width<span class="sc">}</span><span class="vs">px; aspect-ratio: 1; </span></span>
<span id="cb2-100"><a href="#cb2-100" aria-hidden="true" tabindex="-1"></a><span class="vs">            margin-inline: auto'&gt;</span></span>
<span id="cb2-101"><a href="#cb2-101" aria-hidden="true" tabindex="-1"></a><span class="vs">  &lt;/div&gt;`</span> </span>
<span id="cb2-102"><a href="#cb2-102" aria-hidden="true" tabindex="-1"></a>}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<div id="ojs-cell-2" data-nodetype="declaration">

</div>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code hidden" id="cb3" data-startfrom="108" data-source-offset="0"><pre class="sourceCode js code-with-copy"><code class="sourceCode javascript" style="counter-reset: source-line 107;"><span id="cb3-108"><a href="#cb3-108" aria-hidden="true" tabindex="-1"></a><span class="kw">function</span> <span class="fu">init_board</span>(name<span class="op">,</span> extend<span class="op">=</span><span class="fl">5.5</span>) {</span>
<span id="cb3-109"><a href="#cb3-109" aria-hidden="true" tabindex="-1"></a>  <span class="cf">return</span> JXG<span class="op">.</span><span class="at">JSXGraph</span><span class="op">.</span><span class="fu">initBoard</span>(name<span class="op">,</span> {</span>
<span id="cb3-110"><a href="#cb3-110" aria-hidden="true" tabindex="-1"></a>    <span class="dt">boundingbox</span><span class="op">:</span> [<span class="op">-</span>extend<span class="op">,</span> extend<span class="op">,</span> extend<span class="op">,</span> <span class="op">-</span>extend]<span class="op">,</span></span>
<span id="cb3-111"><a href="#cb3-111" aria-hidden="true" tabindex="-1"></a>    <span class="dt">showCopyright</span><span class="op">:</span> <span class="kw">false</span><span class="op">,</span></span>
<span id="cb3-112"><a href="#cb3-112" aria-hidden="true" tabindex="-1"></a>    <span class="dt">showNavigation</span><span class="op">:</span> <span class="kw">false</span><span class="op">,</span></span>
<span id="cb3-113"><a href="#cb3-113" aria-hidden="true" tabindex="-1"></a>    <span class="dt">axis</span><span class="op">:</span> <span class="kw">true</span><span class="op">,</span></span>
<span id="cb3-114"><a href="#cb3-114" aria-hidden="true" tabindex="-1"></a>    <span class="dt">grid</span><span class="op">:</span> <span class="kw">false</span><span class="op">,</span></span>
<span id="cb3-115"><a href="#cb3-115" aria-hidden="true" tabindex="-1"></a>    <span class="dt">pan</span><span class="op">:</span> {</span>
<span id="cb3-116"><a href="#cb3-116" aria-hidden="true" tabindex="-1"></a>      <span class="dt">needTwoFingers</span><span class="op">:</span> <span class="kw">true</span></span>
<span id="cb3-117"><a href="#cb3-117" aria-hidden="true" tabindex="-1"></a>    }<span class="op">,</span></span>
<span id="cb3-118"><a href="#cb3-118" aria-hidden="true" tabindex="-1"></a>    <span class="dt">defaultAxes</span><span class="op">:</span> {</span>
<span id="cb3-119"><a href="#cb3-119" aria-hidden="true" tabindex="-1"></a>      <span class="dt">x</span><span class="op">:</span> {</span>
<span id="cb3-120"><a href="#cb3-120" aria-hidden="true" tabindex="-1"></a>        <span class="dt">ticks</span><span class="op">:</span> {</span>
<span id="cb3-121"><a href="#cb3-121" aria-hidden="true" tabindex="-1"></a>          <span class="dt">insertTicks</span><span class="op">:</span> <span class="kw">false</span><span class="op">,</span></span>
<span id="cb3-122"><a href="#cb3-122" aria-hidden="true" tabindex="-1"></a>          <span class="dt">minorTicks</span><span class="op">:</span> <span class="dv">0</span><span class="op">,</span>   </span>
<span id="cb3-123"><a href="#cb3-123" aria-hidden="true" tabindex="-1"></a>          <span class="dt">majorHeight</span><span class="op">:</span> <span class="dv">5</span><span class="op">,</span></span>
<span id="cb3-124"><a href="#cb3-124" aria-hidden="true" tabindex="-1"></a>          <span class="dt">ticksDistance</span><span class="op">:</span> <span class="dv">1</span><span class="op">,</span></span>
<span id="cb3-125"><a href="#cb3-125" aria-hidden="true" tabindex="-1"></a>          <span class="dt">strokeOpacity</span><span class="op">:</span> <span class="fl">0.8</span><span class="op">,</span></span>
<span id="cb3-126"><a href="#cb3-126" aria-hidden="true" tabindex="-1"></a>          <span class="dt">strokeColor</span><span class="op">:</span> <span class="st">'#000000'</span><span class="op">,</span></span>
<span id="cb3-127"><a href="#cb3-127" aria-hidden="true" tabindex="-1"></a>          <span class="dt">strokeWidth</span><span class="op">:</span> <span class="dv">1</span> </span>
<span id="cb3-128"><a href="#cb3-128" aria-hidden="true" tabindex="-1"></a>        }</span>
<span id="cb3-129"><a href="#cb3-129" aria-hidden="true" tabindex="-1"></a>      }<span class="op">,</span></span>
<span id="cb3-130"><a href="#cb3-130" aria-hidden="true" tabindex="-1"></a>      <span class="dt">y</span><span class="op">:</span> {</span>
<span id="cb3-131"><a href="#cb3-131" aria-hidden="true" tabindex="-1"></a>        <span class="dt">ticks</span><span class="op">:</span> {</span>
<span id="cb3-132"><a href="#cb3-132" aria-hidden="true" tabindex="-1"></a>          <span class="dt">insertTicks</span><span class="op">:</span> <span class="kw">false</span><span class="op">,</span></span>
<span id="cb3-133"><a href="#cb3-133" aria-hidden="true" tabindex="-1"></a>          <span class="dt">minorTicks</span><span class="op">:</span> <span class="dv">0</span><span class="op">,</span></span>
<span id="cb3-134"><a href="#cb3-134" aria-hidden="true" tabindex="-1"></a>          <span class="dt">majorHeight</span><span class="op">:</span> <span class="dv">5</span><span class="op">,</span></span>
<span id="cb3-135"><a href="#cb3-135" aria-hidden="true" tabindex="-1"></a>          <span class="dt">strokeOpacity</span><span class="op">:</span> <span class="fl">0.8</span><span class="op">,</span></span>
<span id="cb3-136"><a href="#cb3-136" aria-hidden="true" tabindex="-1"></a>          <span class="dt">strokeColor</span><span class="op">:</span> <span class="st">'#000000'</span><span class="op">,</span></span>
<span id="cb3-137"><a href="#cb3-137" aria-hidden="true" tabindex="-1"></a>          <span class="dt">strokeWidth</span><span class="op">:</span> <span class="dv">1</span> </span>
<span id="cb3-138"><a href="#cb3-138" aria-hidden="true" tabindex="-1"></a>        }</span>
<span id="cb3-139"><a href="#cb3-139" aria-hidden="true" tabindex="-1"></a>      }</span>
<span id="cb3-140"><a href="#cb3-140" aria-hidden="true" tabindex="-1"></a>    }<span class="op">,</span></span>
<span id="cb3-141"><a href="#cb3-141" aria-hidden="true" tabindex="-1"></a>  })<span class="op">;</span></span>
<span id="cb3-142"><a href="#cb3-142" aria-hidden="true" tabindex="-1"></a>}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<div id="ojs-cell-3" data-nodetype="declaration">

</div>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code hidden" id="cb4" data-startfrom="148" data-source-offset="0"><pre class="sourceCode js code-with-copy"><code class="sourceCode javascript" style="counter-reset: source-line 147;"><span id="cb4-148"><a href="#cb4-148" aria-hidden="true" tabindex="-1"></a><span class="kw">function</span> <span class="fu">make_board</span>(</span>
<span id="cb4-149"><a href="#cb4-149" aria-hidden="true" tabindex="-1"></a>  name<span class="op">,</span> showSlider<span class="op">=</span><span class="kw">true</span><span class="op">,</span> sliderValue<span class="op">=</span><span class="fl">0.0</span><span class="op">,</span> </span>
<span id="cb4-150"><a href="#cb4-150" aria-hidden="true" tabindex="-1"></a>  showP<span class="op">=</span><span class="kw">true</span><span class="op">,</span> showPLabel<span class="op">=</span><span class="kw">true</span></span>
<span id="cb4-151"><a href="#cb4-151" aria-hidden="true" tabindex="-1"></a>) {</span>
<span id="cb4-152"><a href="#cb4-152" aria-hidden="true" tabindex="-1"></a>  <span class="kw">function</span> <span class="fu">vec_length</span>(a)  {</span>
<span id="cb4-153"><a href="#cb4-153" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> <span class="bu">Math</span><span class="op">.</span><span class="fu">sqrt</span>(a[<span class="dv">0</span>] <span class="op">*</span> a[<span class="dv">0</span>] <span class="op">+</span> a[<span class="dv">1</span>] <span class="op">*</span> a[<span class="dv">1</span>])<span class="op">;</span></span>
<span id="cb4-154"><a href="#cb4-154" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb4-155"><a href="#cb4-155" aria-hidden="true" tabindex="-1"></a>  <span class="kw">function</span> <span class="fu">vec_unit</span>(a) {</span>
<span id="cb4-156"><a href="#cb4-156" aria-hidden="true" tabindex="-1"></a>    <span class="kw">const</span> len <span class="op">=</span> <span class="fu">vec_length</span>(a)<span class="op">;</span></span>
<span id="cb4-157"><a href="#cb4-157" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> <span class="fu">vec_scale</span>(a<span class="op">,</span> <span class="dv">1</span> <span class="op">/</span> len)<span class="op">;</span></span>
<span id="cb4-158"><a href="#cb4-158" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb4-159"><a href="#cb4-159" aria-hidden="true" tabindex="-1"></a>  <span class="kw">function</span> <span class="fu">vec_scale</span>(a<span class="op">,</span> scalar) {</span>
<span id="cb4-160"><a href="#cb4-160" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> [a[<span class="dv">0</span>] <span class="op">*</span> scalar<span class="op">,</span> a[<span class="dv">1</span>] <span class="op">*</span> scalar]<span class="op">;</span></span>
<span id="cb4-161"><a href="#cb4-161" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb4-162"><a href="#cb4-162" aria-hidden="true" tabindex="-1"></a>  <span class="kw">function</span> <span class="fu">vec_dot</span>(a<span class="op">,</span> b) {</span>
<span id="cb4-163"><a href="#cb4-163" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> a[<span class="dv">0</span>] <span class="op">*</span> b[<span class="dv">0</span>] <span class="op">+</span> a[<span class="dv">1</span>] <span class="op">*</span> b[<span class="dv">1</span>]<span class="op">;</span></span>
<span id="cb4-164"><a href="#cb4-164" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb4-165"><a href="#cb4-165" aria-hidden="true" tabindex="-1"></a>  <span class="kw">function</span> <span class="fu">vec_cross</span>(a<span class="op">,</span> b) {</span>
<span id="cb4-166"><a href="#cb4-166" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> a[<span class="dv">0</span>] <span class="op">*</span> b[<span class="dv">1</span>] <span class="op">-</span> a[<span class="dv">1</span>] <span class="op">*</span> b[<span class="dv">0</span>]<span class="op">;</span></span>
<span id="cb4-167"><a href="#cb4-167" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb4-168"><a href="#cb4-168" aria-hidden="true" tabindex="-1"></a>  <span class="kw">function</span> <span class="fu">vec_mid</span>(a<span class="op">,</span> b) {</span>
<span id="cb4-169"><a href="#cb4-169" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> <span class="fu">vec_scale</span>(<span class="fu">vec_add</span>(a<span class="op">,</span> b)<span class="op">,</span> <span class="fl">0.5</span>)<span class="op">;</span></span>
<span id="cb4-170"><a href="#cb4-170" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb4-171"><a href="#cb4-171" aria-hidden="true" tabindex="-1"></a>  <span class="kw">function</span> <span class="fu">vec_rot90</span>(v) {</span>
<span id="cb4-172"><a href="#cb4-172" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> [<span class="op">-</span>v[<span class="dv">1</span>]<span class="op">,</span> v[<span class="dv">0</span>]]<span class="op">;</span></span>
<span id="cb4-173"><a href="#cb4-173" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb4-174"><a href="#cb4-174" aria-hidden="true" tabindex="-1"></a>  <span class="kw">function</span> <span class="fu">vec_add</span>(a<span class="op">,</span> b) {</span>
<span id="cb4-175"><a href="#cb4-175" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> [a[<span class="dv">0</span>] <span class="op">+</span> b[<span class="dv">0</span>]<span class="op">,</span> a[<span class="dv">1</span>] <span class="op">+</span> b[<span class="dv">1</span>]]<span class="op">;</span></span>
<span id="cb4-176"><a href="#cb4-176" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb4-177"><a href="#cb4-177" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-178"><a href="#cb4-178" aria-hidden="true" tabindex="-1"></a>  <span class="kw">function</span> <span class="fu">calcP</span>(a<span class="op">,</span> b) {</span>
<span id="cb4-179"><a href="#cb4-179" aria-hidden="true" tabindex="-1"></a>    <span class="kw">const</span> unit_b <span class="op">=</span> <span class="fu">vec_unit</span>(b)<span class="op">;</span></span>
<span id="cb4-180"><a href="#cb4-180" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> <span class="fu">vec_scale</span>(unit_b<span class="op">,</span> <span class="fu">vec_dot</span>(a<span class="op">,</span> unit_b))<span class="op">;</span></span>
<span id="cb4-181"><a href="#cb4-181" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb4-182"><a href="#cb4-182" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-183"><a href="#cb4-183" aria-hidden="true" tabindex="-1"></a>  <span class="kw">function</span> <span class="fu">calcUnder</span>(p<span class="op">,</span> a<span class="op">,</span> delta<span class="op">=</span><span class="fl">0.05</span>) {</span>
<span id="cb4-184"><a href="#cb4-184" aria-hidden="true" tabindex="-1"></a>    <span class="kw">var</span> n <span class="op">=</span> <span class="fu">vec_scale</span>(<span class="fu">vec_rot90</span>(p)<span class="op">,</span> delta <span class="op">/</span> <span class="fu">vec_length</span>(p))<span class="op">;</span></span>
<span id="cb4-185"><a href="#cb4-185" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> (<span class="fu">vec_cross</span>(a<span class="op">,</span> p) <span class="op">&lt;</span> <span class="dv">0</span>) {</span>
<span id="cb4-186"><a href="#cb4-186" aria-hidden="true" tabindex="-1"></a>      n <span class="op">=</span> <span class="fu">vec_scale</span>(n<span class="op">,</span> <span class="op">-</span><span class="dv">1</span>)<span class="op">;</span></span>
<span id="cb4-187"><a href="#cb4-187" aria-hidden="true" tabindex="-1"></a>    }</span>
<span id="cb4-188"><a href="#cb4-188" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> [n<span class="op">,</span> <span class="fu">vec_add</span>(p<span class="op">,</span> n)]<span class="op">;</span></span>
<span id="cb4-189"><a href="#cb4-189" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb4-190"><a href="#cb4-190" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-191"><a href="#cb4-191" aria-hidden="true" tabindex="-1"></a>  <span class="kw">const</span> a <span class="op">=</span> [<span class="fl">2.5</span><span class="op">,</span> <span class="dv">2</span>]<span class="op">;</span></span>
<span id="cb4-192"><a href="#cb4-192" aria-hidden="true" tabindex="-1"></a>  <span class="kw">const</span> b <span class="op">=</span> [<span class="dv">1</span><span class="op">,</span> <span class="dv">0</span>]<span class="op">;</span></span>
<span id="cb4-193"><a href="#cb4-193" aria-hidden="true" tabindex="-1"></a>  <span class="kw">const</span> p <span class="op">=</span> [a[<span class="dv">0</span>]<span class="op">,</span> <span class="dv">0</span>]<span class="op">;</span></span>
<span id="cb4-194"><a href="#cb4-194" aria-hidden="true" tabindex="-1"></a>  <span class="kw">var</span> board <span class="op">=</span> <span class="fu">init_board</span>(name<span class="op">,</span> <span class="fl">3.5</span>)<span class="op">;</span></span>
<span id="cb4-195"><a href="#cb4-195" aria-hidden="true" tabindex="-1"></a>  <span class="kw">const</span> pointa <span class="op">=</span> board<span class="op">.</span><span class="fu">create</span>(<span class="st">"point"</span><span class="op">,</span> a<span class="op">,</span> {</span>
<span id="cb4-196"><a href="#cb4-196" aria-hidden="true" tabindex="-1"></a>    <span class="dt">fixed</span><span class="op">:</span> <span class="kw">false</span><span class="op">,</span></span>
<span id="cb4-197"><a href="#cb4-197" aria-hidden="true" tabindex="-1"></a>    <span class="dt">name</span><span class="op">:</span> <span class="st">"a"</span><span class="op">,</span></span>
<span id="cb4-198"><a href="#cb4-198" aria-hidden="true" tabindex="-1"></a>    <span class="dt">color</span><span class="op">:</span> <span class="st">"blue"</span></span>
<span id="cb4-199"><a href="#cb4-199" aria-hidden="true" tabindex="-1"></a>  })</span>
<span id="cb4-200"><a href="#cb4-200" aria-hidden="true" tabindex="-1"></a>  <span class="kw">const</span> pointb <span class="op">=</span> board<span class="op">.</span><span class="fu">create</span>(<span class="st">"point"</span><span class="op">,</span> b<span class="op">,</span> {</span>
<span id="cb4-201"><a href="#cb4-201" aria-hidden="true" tabindex="-1"></a>    <span class="dt">fixed</span><span class="op">:</span> <span class="kw">true</span><span class="op">,</span></span>
<span id="cb4-202"><a href="#cb4-202" aria-hidden="true" tabindex="-1"></a>    <span class="dt">name</span><span class="op">:</span> <span class="st">"b"</span><span class="op">,</span></span>
<span id="cb4-203"><a href="#cb4-203" aria-hidden="true" tabindex="-1"></a>    <span class="dt">color</span><span class="op">:</span> <span class="st">"red"</span></span>
<span id="cb4-204"><a href="#cb4-204" aria-hidden="true" tabindex="-1"></a>  })<span class="op">;</span></span>
<span id="cb4-205"><a href="#cb4-205" aria-hidden="true" tabindex="-1"></a>  <span class="kw">const</span> pointp <span class="op">=</span> board<span class="op">.</span><span class="fu">create</span>(<span class="st">"point"</span><span class="op">,</span> [<span class="kw">function</span>() {</span>
<span id="cb4-206"><a href="#cb4-206" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> <span class="fu">calcP</span>([pointa<span class="op">.</span><span class="fu">X</span>()<span class="op">,</span> pointa<span class="op">.</span><span class="fu">Y</span>()]<span class="op">,</span> [pointb<span class="op">.</span><span class="fu">X</span>()<span class="op">,</span> pointb<span class="op">.</span><span class="fu">Y</span>()])[<span class="dv">0</span>]<span class="op">;</span></span>
<span id="cb4-207"><a href="#cb4-207" aria-hidden="true" tabindex="-1"></a>  }<span class="op">,</span> <span class="kw">function</span>() {</span>
<span id="cb4-208"><a href="#cb4-208" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> <span class="fu">calcP</span>([pointa<span class="op">.</span><span class="fu">X</span>()<span class="op">,</span> pointa<span class="op">.</span><span class="fu">Y</span>()]<span class="op">,</span> [pointb<span class="op">.</span><span class="fu">X</span>()<span class="op">,</span> pointb<span class="op">.</span><span class="fu">Y</span>()])[<span class="dv">1</span>]<span class="op">;</span></span>
<span id="cb4-209"><a href="#cb4-209" aria-hidden="true" tabindex="-1"></a>  }]<span class="op">,</span> {</span>
<span id="cb4-210"><a href="#cb4-210" aria-hidden="true" tabindex="-1"></a>    <span class="dt">visible</span><span class="op">:</span> showP<span class="op">,</span></span>
<span id="cb4-211"><a href="#cb4-211" aria-hidden="true" tabindex="-1"></a>    <span class="dt">fixed</span><span class="op">:</span> <span class="kw">true</span><span class="op">,</span></span>
<span id="cb4-212"><a href="#cb4-212" aria-hidden="true" tabindex="-1"></a>    <span class="dt">name</span><span class="op">:</span> <span class="st">"p"</span><span class="op">,</span></span>
<span id="cb4-213"><a href="#cb4-213" aria-hidden="true" tabindex="-1"></a>    <span class="dt">color</span><span class="op">:</span> <span class="st">"green"</span><span class="op">,</span></span>
<span id="cb4-214"><a href="#cb4-214" aria-hidden="true" tabindex="-1"></a>    <span class="dt">size</span><span class="op">:</span> <span class="dv">5</span><span class="op">,</span></span>
<span id="cb4-215"><a href="#cb4-215" aria-hidden="true" tabindex="-1"></a>  })<span class="op">;</span></span>
<span id="cb4-216"><a href="#cb4-216" aria-hidden="true" tabindex="-1"></a>  <span class="kw">const</span> lineGreen <span class="op">=</span> board<span class="op">.</span><span class="fu">create</span>(<span class="st">"line"</span><span class="op">,</span> [<span class="kw">function</span>() {</span>
<span id="cb4-217"><a href="#cb4-217" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> <span class="fu">calcUnder</span>([pointp<span class="op">.</span><span class="fu">X</span>()<span class="op">,</span> pointp<span class="op">.</span><span class="fu">Y</span>()]<span class="op">,</span> [pointa<span class="op">.</span><span class="fu">X</span>()<span class="op">,</span> pointa<span class="op">.</span><span class="fu">Y</span>()]<span class="op">,</span> <span class="fl">0.03</span>)[<span class="dv">0</span>]<span class="op">;</span></span>
<span id="cb4-218"><a href="#cb4-218" aria-hidden="true" tabindex="-1"></a>  }<span class="op">,</span> <span class="kw">function</span>() {</span>
<span id="cb4-219"><a href="#cb4-219" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> <span class="fu">calcUnder</span>([pointp<span class="op">.</span><span class="fu">X</span>()<span class="op">,</span> pointp<span class="op">.</span><span class="fu">Y</span>()]<span class="op">,</span> [pointa<span class="op">.</span><span class="fu">X</span>()<span class="op">,</span> pointa<span class="op">.</span><span class="fu">Y</span>()]<span class="op">,</span> <span class="fl">0.03</span>)[<span class="dv">1</span>]<span class="op">;</span></span>
<span id="cb4-220"><a href="#cb4-220" aria-hidden="true" tabindex="-1"></a>  }]<span class="op">,</span> {</span>
<span id="cb4-221"><a href="#cb4-221" aria-hidden="true" tabindex="-1"></a>    <span class="dt">visible</span><span class="op">:</span> showP<span class="op">,</span></span>
<span id="cb4-222"><a href="#cb4-222" aria-hidden="true" tabindex="-1"></a>    <span class="dt">lastArrow</span><span class="op">:</span><span class="kw">true</span><span class="op">,</span></span>
<span id="cb4-223"><a href="#cb4-223" aria-hidden="true" tabindex="-1"></a>    <span class="dt">fixed</span><span class="op">:</span> <span class="kw">true</span><span class="op">,</span></span>
<span id="cb4-224"><a href="#cb4-224" aria-hidden="true" tabindex="-1"></a>    <span class="dt">straightFirst</span><span class="op">:</span><span class="kw">false</span><span class="op">,</span> </span>
<span id="cb4-225"><a href="#cb4-225" aria-hidden="true" tabindex="-1"></a>    <span class="dt">straightLast</span><span class="op">:</span><span class="kw">false</span><span class="op">,</span> </span>
<span id="cb4-226"><a href="#cb4-226" aria-hidden="true" tabindex="-1"></a>    <span class="dt">strokeColor</span><span class="op">:</span> <span class="st">"green"</span><span class="op">,</span></span>
<span id="cb4-227"><a href="#cb4-227" aria-hidden="true" tabindex="-1"></a>    <span class="dt">strokeWidth</span><span class="op">:</span> <span class="fl">2.5</span><span class="op">,</span></span>
<span id="cb4-228"><a href="#cb4-228" aria-hidden="true" tabindex="-1"></a>    <span class="dt">label</span><span class="op">:</span>{<span class="dt">offsets</span><span class="op">:</span>[<span class="op">-</span><span class="dv">1</span><span class="op">,</span><span class="dv">1</span>]}</span>
<span id="cb4-229"><a href="#cb4-229" aria-hidden="true" tabindex="-1"></a>  })<span class="op">;</span></span>
<span id="cb4-230"><a href="#cb4-230" aria-hidden="true" tabindex="-1"></a>  <span class="kw">const</span> linea <span class="op">=</span> board<span class="op">.</span><span class="fu">create</span>(<span class="st">"line"</span><span class="op">,</span> [[<span class="dv">0</span><span class="op">,</span> <span class="dv">0</span>]<span class="op">,</span> pointa]<span class="op">,</span> {</span>
<span id="cb4-231"><a href="#cb4-231" aria-hidden="true" tabindex="-1"></a>    <span class="dt">fixed</span><span class="op">:</span> <span class="kw">true</span><span class="op">,</span></span>
<span id="cb4-232"><a href="#cb4-232" aria-hidden="true" tabindex="-1"></a>    <span class="dt">straightFirst</span><span class="op">:</span><span class="kw">false</span><span class="op">,</span> </span>
<span id="cb4-233"><a href="#cb4-233" aria-hidden="true" tabindex="-1"></a>    <span class="dt">straightLast</span><span class="op">:</span><span class="kw">false</span><span class="op">,</span> </span>
<span id="cb4-234"><a href="#cb4-234" aria-hidden="true" tabindex="-1"></a>    <span class="dt">lastArrow</span><span class="op">:</span><span class="kw">true</span><span class="op">,</span></span>
<span id="cb4-235"><a href="#cb4-235" aria-hidden="true" tabindex="-1"></a>    <span class="dt">strokeColor</span><span class="op">:</span> <span class="st">"blue"</span><span class="op">,</span></span>
<span id="cb4-236"><a href="#cb4-236" aria-hidden="true" tabindex="-1"></a>    <span class="dt">strokeWidth</span><span class="op">:</span> <span class="dv">2</span></span>
<span id="cb4-237"><a href="#cb4-237" aria-hidden="true" tabindex="-1"></a>  })<span class="op">;</span></span>
<span id="cb4-238"><a href="#cb4-238" aria-hidden="true" tabindex="-1"></a>  <span class="kw">const</span> lineb <span class="op">=</span> board<span class="op">.</span><span class="fu">create</span>(<span class="st">"line"</span><span class="op">,</span> [[<span class="dv">0</span><span class="op">,</span> <span class="dv">0</span>]<span class="op">,</span> pointb]<span class="op">,</span> {</span>
<span id="cb4-239"><a href="#cb4-239" aria-hidden="true" tabindex="-1"></a>    <span class="dt">fixed</span><span class="op">:</span> <span class="kw">true</span><span class="op">,</span></span>
<span id="cb4-240"><a href="#cb4-240" aria-hidden="true" tabindex="-1"></a>    <span class="dt">straightFirst</span><span class="op">:</span><span class="kw">false</span><span class="op">,</span> </span>
<span id="cb4-241"><a href="#cb4-241" aria-hidden="true" tabindex="-1"></a>    <span class="dt">straightLast</span><span class="op">:</span><span class="kw">false</span><span class="op">,</span> </span>
<span id="cb4-242"><a href="#cb4-242" aria-hidden="true" tabindex="-1"></a>    <span class="dt">lastArrow</span><span class="op">:</span><span class="kw">true</span><span class="op">,</span></span>
<span id="cb4-243"><a href="#cb4-243" aria-hidden="true" tabindex="-1"></a>    <span class="dt">strokeColor</span><span class="op">:</span> <span class="st">"red"</span><span class="op">,</span></span>
<span id="cb4-244"><a href="#cb4-244" aria-hidden="true" tabindex="-1"></a>    <span class="dt">strokeWidth</span><span class="op">:</span> <span class="dv">2</span></span>
<span id="cb4-245"><a href="#cb4-245" aria-hidden="true" tabindex="-1"></a>  })<span class="op">;</span></span>
<span id="cb4-246"><a href="#cb4-246" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-247"><a href="#cb4-247" aria-hidden="true" tabindex="-1"></a>  <span class="kw">const</span> lineap <span class="op">=</span> board<span class="op">.</span><span class="fu">create</span>(<span class="st">"line"</span><span class="op">,</span> [pointa<span class="op">,</span> pointp]<span class="op">,</span> {</span>
<span id="cb4-248"><a href="#cb4-248" aria-hidden="true" tabindex="-1"></a>    <span class="dt">visible</span><span class="op">:</span> showP<span class="op">,</span></span>
<span id="cb4-249"><a href="#cb4-249" aria-hidden="true" tabindex="-1"></a>    <span class="dt">fixed</span><span class="op">:</span> <span class="kw">true</span><span class="op">,</span></span>
<span id="cb4-250"><a href="#cb4-250" aria-hidden="true" tabindex="-1"></a>    <span class="dt">straightFirst</span><span class="op">:</span><span class="kw">false</span><span class="op">,</span> </span>
<span id="cb4-251"><a href="#cb4-251" aria-hidden="true" tabindex="-1"></a>    <span class="dt">straightLast</span><span class="op">:</span><span class="kw">false</span><span class="op">,</span> </span>
<span id="cb4-252"><a href="#cb4-252" aria-hidden="true" tabindex="-1"></a>    <span class="dt">dash</span><span class="op">:</span> <span class="dv">2</span><span class="op">,</span></span>
<span id="cb4-253"><a href="#cb4-253" aria-hidden="true" tabindex="-1"></a>    <span class="dt">strokeColor</span><span class="op">:</span> <span class="st">"black"</span><span class="op">,</span></span>
<span id="cb4-254"><a href="#cb4-254" aria-hidden="true" tabindex="-1"></a>    <span class="dt">strokeWidth</span><span class="op">:</span> <span class="dv">1</span></span>
<span id="cb4-255"><a href="#cb4-255" aria-hidden="true" tabindex="-1"></a>  })</span>
<span id="cb4-256"><a href="#cb4-256" aria-hidden="true" tabindex="-1"></a>  <span class="kw">const</span> rightAngle <span class="op">=</span> board<span class="op">.</span><span class="fu">create</span>(<span class="st">"nonreflexangle"</span><span class="op">,</span> [pointa<span class="op">,</span> pointp<span class="op">,</span> pointb]<span class="op">,</span> {</span>
<span id="cb4-257"><a href="#cb4-257" aria-hidden="true" tabindex="-1"></a>    <span class="dt">visible</span><span class="op">:</span> showP<span class="op">,</span></span>
<span id="cb4-258"><a href="#cb4-258" aria-hidden="true" tabindex="-1"></a>    <span class="dt">name</span><span class="op">:</span> <span class="st">""</span><span class="op">,</span></span>
<span id="cb4-259"><a href="#cb4-259" aria-hidden="true" tabindex="-1"></a>    <span class="dt">strokeColor</span><span class="op">:</span> <span class="st">"black"</span><span class="op">,</span></span>
<span id="cb4-260"><a href="#cb4-260" aria-hidden="true" tabindex="-1"></a>    <span class="dt">strokeWidth</span><span class="op">:</span> <span class="fl">0.7</span><span class="op">,</span></span>
<span id="cb4-261"><a href="#cb4-261" aria-hidden="true" tabindex="-1"></a>    <span class="dt">fillColor</span><span class="op">:</span> <span class="st">"#00000000"</span><span class="op">,</span></span>
<span id="cb4-262"><a href="#cb4-262" aria-hidden="true" tabindex="-1"></a>    <span class="dt">radius</span><span class="op">:</span> <span class="fl">0.3</span></span>
<span id="cb4-263"><a href="#cb4-263" aria-hidden="true" tabindex="-1"></a>  })<span class="op">;</span></span>
<span id="cb4-264"><a href="#cb4-264" aria-hidden="true" tabindex="-1"></a>  <span class="kw">const</span> pointo <span class="op">=</span> board<span class="op">.</span><span class="fu">create</span>(<span class="st">"point"</span><span class="op">,</span> [<span class="dv">0</span><span class="op">,</span> <span class="dv">0</span>]<span class="op">,</span> {</span>
<span id="cb4-265"><a href="#cb4-265" aria-hidden="true" tabindex="-1"></a>    <span class="dt">visible</span><span class="op">:</span> <span class="kw">false</span><span class="op">,</span></span>
<span id="cb4-266"><a href="#cb4-266" aria-hidden="true" tabindex="-1"></a>    <span class="dt">fixed</span><span class="op">:</span> <span class="kw">true</span><span class="op">,</span></span>
<span id="cb4-267"><a href="#cb4-267" aria-hidden="true" tabindex="-1"></a>    <span class="dt">name</span><span class="op">:</span> <span class="st">"o"</span><span class="op">,</span></span>
<span id="cb4-268"><a href="#cb4-268" aria-hidden="true" tabindex="-1"></a>  })<span class="op">;</span></span>
<span id="cb4-269"><a href="#cb4-269" aria-hidden="true" tabindex="-1"></a>  <span class="kw">const</span> alphaAngle <span class="op">=</span> board<span class="op">.</span><span class="fu">create</span>(<span class="st">"angle"</span><span class="op">,</span> [pointb<span class="op">,</span> pointo<span class="op">,</span> pointa]<span class="op">,</span> {</span>
<span id="cb4-270"><a href="#cb4-270" aria-hidden="true" tabindex="-1"></a>    <span class="dt">name</span><span class="op">:</span> <span class="st">"θ"</span></span>
<span id="cb4-271"><a href="#cb4-271" aria-hidden="true" tabindex="-1"></a>  })<span class="op">;</span></span>
<span id="cb4-272"><a href="#cb4-272" aria-hidden="true" tabindex="-1"></a> </span>
<span id="cb4-273"><a href="#cb4-273" aria-hidden="true" tabindex="-1"></a>  <span class="kw">const</span> slider <span class="op">=</span> board<span class="op">.</span><span class="fu">create</span>(<span class="st">'slider'</span><span class="op">,</span> [[<span class="op">-</span><span class="dv">1</span><span class="op">,</span> <span class="op">-</span><span class="dv">2</span>]<span class="op">,</span> [<span class="dv">1</span><span class="op">,</span> <span class="op">-</span><span class="dv">2</span>]<span class="op">,</span> [<span class="dv">0</span><span class="op">,</span> sliderValue<span class="op">,</span> <span class="dv">360</span>]]<span class="op">,</span> {</span>
<span id="cb4-274"><a href="#cb4-274" aria-hidden="true" tabindex="-1"></a>    <span class="dt">visible</span><span class="op">:</span> showSlider<span class="op">,</span></span>
<span id="cb4-275"><a href="#cb4-275" aria-hidden="true" tabindex="-1"></a>    <span class="dt">name</span><span class="op">:</span> <span class="st">"alpha"</span><span class="op">,</span></span>
<span id="cb4-276"><a href="#cb4-276" aria-hidden="true" tabindex="-1"></a>    <span class="dt">snapWidth</span><span class="op">:</span> <span class="dv">1</span></span>
<span id="cb4-277"><a href="#cb4-277" aria-hidden="true" tabindex="-1"></a>  })<span class="op">;</span></span>
<span id="cb4-278"><a href="#cb4-278" aria-hidden="true" tabindex="-1"></a>  <span class="kw">const</span> text <span class="op">=</span> board<span class="op">.</span><span class="fu">create</span>(<span class="st">'text'</span><span class="op">,</span> [<span class="kw">function</span>() {</span>
<span id="cb4-279"><a href="#cb4-279" aria-hidden="true" tabindex="-1"></a>    <span class="kw">const</span> s <span class="op">=</span> <span class="fu">calcUnder</span>([pointp<span class="op">.</span><span class="fu">X</span>()<span class="op">,</span> pointp<span class="op">.</span><span class="fu">Y</span>()]<span class="op">,</span> [pointa<span class="op">.</span><span class="fu">X</span>()<span class="op">,</span> pointa<span class="op">.</span><span class="fu">Y</span>()]<span class="op">,</span> <span class="fl">0.4</span>)<span class="op">;</span></span>
<span id="cb4-280"><a href="#cb4-280" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> <span class="fu">vec_mid</span>(s[<span class="dv">0</span>]<span class="op">,</span> s[<span class="dv">1</span>])[<span class="dv">0</span>]<span class="op">;</span></span>
<span id="cb4-281"><a href="#cb4-281" aria-hidden="true" tabindex="-1"></a>  }<span class="op">,</span> <span class="kw">function</span>() {</span>
<span id="cb4-282"><a href="#cb4-282" aria-hidden="true" tabindex="-1"></a>    <span class="kw">const</span> s <span class="op">=</span> <span class="fu">calcUnder</span>([pointp<span class="op">.</span><span class="fu">X</span>()<span class="op">,</span> pointp<span class="op">.</span><span class="fu">Y</span>()]<span class="op">,</span> [pointa<span class="op">.</span><span class="fu">X</span>()<span class="op">,</span> pointa<span class="op">.</span><span class="fu">Y</span>()]<span class="op">,</span> <span class="fl">0.4</span>)<span class="op">;</span></span>
<span id="cb4-283"><a href="#cb4-283" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> <span class="fu">vec_mid</span>(s[<span class="dv">0</span>]<span class="op">,</span> s[<span class="dv">1</span>])[<span class="dv">1</span>]<span class="op">;</span></span>
<span id="cb4-284"><a href="#cb4-284" aria-hidden="true" tabindex="-1"></a>  }<span class="op">,</span> <span class="st">'||a||cos(θ)'</span>]<span class="op">,</span> {</span>
<span id="cb4-285"><a href="#cb4-285" aria-hidden="true" tabindex="-1"></a>    <span class="dt">visible</span><span class="op">:</span> showP <span class="op">&amp;&amp;</span> showPLabel<span class="op">,</span></span>
<span id="cb4-286"><a href="#cb4-286" aria-hidden="true" tabindex="-1"></a>    <span class="dt">anchorX</span><span class="op">:</span> <span class="st">"middle"</span><span class="op">,</span></span>
<span id="cb4-287"><a href="#cb4-287" aria-hidden="true" tabindex="-1"></a>    <span class="dt">anchorY</span><span class="op">:</span> <span class="st">"middle"</span><span class="op">,</span></span>
<span id="cb4-288"><a href="#cb4-288" aria-hidden="true" tabindex="-1"></a>    <span class="co">// fontSize: 15,</span></span>
<span id="cb4-289"><a href="#cb4-289" aria-hidden="true" tabindex="-1"></a>  })</span>
<span id="cb4-290"><a href="#cb4-290" aria-hidden="true" tabindex="-1"></a>  <span class="kw">const</span> rot <span class="op">=</span> board<span class="op">.</span><span class="fu">create</span>(<span class="st">'transform'</span><span class="op">,</span> [<span class="kw">function</span>(){<span class="cf">return</span> slider<span class="op">.</span><span class="fu">Value</span>() <span class="op">/</span> <span class="dv">180</span> <span class="op">*</span> <span class="bu">Math</span><span class="op">.</span><span class="cn">PI</span><span class="op">;</span>}<span class="op">,</span> [<span class="dv">0</span><span class="op">,</span> <span class="dv">0</span>]]<span class="op">,</span> {<span class="dt">type</span><span class="op">:</span><span class="st">'rotate'</span>})<span class="op">;</span></span>
<span id="cb4-291"><a href="#cb4-291" aria-hidden="true" tabindex="-1"></a>  rot<span class="op">.</span><span class="fu">bindTo</span>([pointb<span class="op">,</span> pointa])<span class="op">;</span></span>
<span id="cb4-292"><a href="#cb4-292" aria-hidden="true" tabindex="-1"></a>  <span class="cf">return</span> board<span class="op">;</span></span>
<span id="cb4-293"><a href="#cb4-293" aria-hidden="true" tabindex="-1"></a>}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<div id="ojs-cell-4" data-nodetype="declaration">

</div>
</div>
</div>
<p>A visualization for the setup we have so far:</p>
<div class="cell">
<div class="sourceCode cell-code hidden" id="cb5" data-startfrom="301" data-source-offset="0"><pre class="sourceCode js code-with-copy"><code class="sourceCode javascript" style="counter-reset: source-line 300;"><span id="cb5-301"><a href="#cb5-301" aria-hidden="true" tabindex="-1"></a><span class="fu">board_div</span>(<span class="st">"board1"</span><span class="op">,</span> <span class="dv">300</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<div id="ojs-cell-5" data-nodetype="expression">

</div>
</div>
</div>
<div class="cell hidden">
<div class="sourceCode cell-code hidden" id="cb6" data-startfrom="307" data-source-offset="0"><pre class="sourceCode js code-with-copy"><code class="sourceCode javascript" style="counter-reset: source-line 306;"><span id="cb6-307"><a href="#cb6-307" aria-hidden="true" tabindex="-1"></a>board1 <span class="op">=</span> <span class="fu">make_board</span>(<span class="st">"board1"</span><span class="op">,</span> <span class="co">/*showSlider=*/</span><span class="kw">false</span><span class="op">,</span> <span class="co">/*sliderValue=*/</span><span class="dv">30</span><span class="op">,</span> <span class="co">/*showP=*/</span><span class="kw">false</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display hidden">
<div id="ojs-cell-6" data-nodetype="declaration">

</div>
</div>
</div>
<p>We have the following items shown above:</p>
<ul>
<li>The vector <span class="math inline">\(\textbf{a}\)</span>: it is <strong>interactive</strong> and visualized with blue; feel free to move the point <span class="math inline">\(\textbf{a}\)</span> around.</li>
<li>The vector <span class="math inline">\(\textbf{b}\)</span>: it is visualized with red and <span class="math inline">\(\|\textbf{b}\|=1\)</span>.</li>
<li><span class="math inline">\(\theta\)</span>: the angle from <span class="math inline">\(\textbf{b}\)</span> to <span class="math inline">\(\textbf{a}\)</span></li>
</ul>
<p>The geometric definition implies that the dot product is <strong>invariant under rotations</strong>. So, if we rotate the both vectors <span class="math inline">\(\textbf{a}\)</span> and <span class="math inline">\(\textbf{b}\)</span> by the same angle <span class="math inline">\(\alpha\)</span>, the dot product won’t change. It is not obvious from the algebraic definition, but a detailed proof is provided in <a href="#rotational-invariance">the following section</a>. Let’s use this property and simplify our problem for the third time. We can rotate the both vectors such that <span class="math inline">\(\textbf{b}\)</span> is aligned with the x-axis. Click the button below for the illustration:</p>
<div class="cell">
<div class="sourceCode cell-code hidden" id="cb7" data-startfrom="321" data-source-offset="0"><pre class="sourceCode js code-with-copy"><code class="sourceCode javascript" style="counter-reset: source-line 320;"><span id="cb7-321"><a href="#cb7-321" aria-hidden="true" tabindex="-1"></a>viewof mybutton <span class="op">=</span> {</span>
<span id="cb7-322"><a href="#cb7-322" aria-hidden="true" tabindex="-1"></a>  <span class="kw">const</span> form <span class="op">=</span> Inputs<span class="op">.</span><span class="fu">button</span>(<span class="st">"Play to Rotate"</span><span class="op">,</span> {<span class="dt">value</span><span class="op">:</span> <span class="kw">null</span><span class="op">,</span> <span class="dt">reduce</span><span class="op">:</span> () <span class="kw">=&gt;</span> {</span>
<span id="cb7-323"><a href="#cb7-323" aria-hidden="true" tabindex="-1"></a>    <span class="kw">var</span> slider <span class="op">=</span> board2<span class="op">.</span><span class="at">elementsByName</span>[<span class="st">"alpha"</span>]<span class="op">;</span></span>
<span id="cb7-324"><a href="#cb7-324" aria-hidden="true" tabindex="-1"></a>    <span class="kw">function</span> <span class="fu">updateRotate</span>() {</span>
<span id="cb7-325"><a href="#cb7-325" aria-hidden="true" tabindex="-1"></a>      <span class="cf">if</span> (slider<span class="op">.</span><span class="fu">Value</span>() <span class="op">==</span> <span class="dv">0</span>) {</span>
<span id="cb7-326"><a href="#cb7-326" aria-hidden="true" tabindex="-1"></a>        <span class="cf">return</span><span class="op">;</span></span>
<span id="cb7-327"><a href="#cb7-327" aria-hidden="true" tabindex="-1"></a>      }</span>
<span id="cb7-328"><a href="#cb7-328" aria-hidden="true" tabindex="-1"></a>      slider<span class="op">.</span><span class="fu">setValue</span>(<span class="bu">Math</span><span class="op">.</span><span class="fu">max</span>(<span class="dv">0</span><span class="op">,</span> slider<span class="op">.</span><span class="fu">Value</span>() <span class="op">-</span> <span class="dv">1</span>))<span class="op">;</span></span>
<span id="cb7-329"><a href="#cb7-329" aria-hidden="true" tabindex="-1"></a>      board2<span class="op">.</span><span class="fu">update</span>()<span class="op">;</span></span>
<span id="cb7-330"><a href="#cb7-330" aria-hidden="true" tabindex="-1"></a>      <span class="pp">setTimeout</span>(updateRotate<span class="op">,</span> <span class="dv">12</span>)<span class="op">;</span></span>
<span id="cb7-331"><a href="#cb7-331" aria-hidden="true" tabindex="-1"></a>    }</span>
<span id="cb7-332"><a href="#cb7-332" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> (slider<span class="op">.</span><span class="fu">Value</span>() <span class="op">==</span> <span class="dv">0</span>) {</span>
<span id="cb7-333"><a href="#cb7-333" aria-hidden="true" tabindex="-1"></a>      slider<span class="op">.</span><span class="fu">setValue</span>(<span class="dv">359</span>)<span class="op">;</span></span>
<span id="cb7-334"><a href="#cb7-334" aria-hidden="true" tabindex="-1"></a>    }</span>
<span id="cb7-335"><a href="#cb7-335" aria-hidden="true" tabindex="-1"></a>    <span class="fu">updateRotate</span>()<span class="op">;</span></span>
<span id="cb7-336"><a href="#cb7-336" aria-hidden="true" tabindex="-1"></a>  }})<span class="op">;</span></span>
<span id="cb7-337"><a href="#cb7-337" aria-hidden="true" tabindex="-1"></a>  <span class="kw">const</span> scope <span class="op">=</span> DOM<span class="op">.</span><span class="fu">uid</span>()<span class="op">.</span><span class="at">id</span><span class="op">;</span></span>
<span id="cb7-338"><a href="#cb7-338" aria-hidden="true" tabindex="-1"></a>  <span class="kw">const</span> cls <span class="op">=</span> form<span class="op">.</span><span class="at">classList</span>[<span class="dv">0</span>]<span class="op">;</span></span>
<span id="cb7-339"><a href="#cb7-339" aria-hidden="true" tabindex="-1"></a>  form<span class="op">.</span><span class="at">classList</span><span class="op">.</span><span class="fu">add</span>(scope)<span class="op">;</span></span>
<span id="cb7-340"><a href="#cb7-340" aria-hidden="true" tabindex="-1"></a>  form<span class="op">.</span><span class="fu">append</span>(<span class="fu">html</span><span class="vs">`&lt;style&gt;</span></span>
<span id="cb7-341"><a href="#cb7-341" aria-hidden="true" tabindex="-1"></a><span class="vs">    .</span><span class="sc">${</span>cls<span class="sc">}</span><span class="vs"> &gt; button { color: white }</span></span>
<span id="cb7-342"><a href="#cb7-342" aria-hidden="true" tabindex="-1"></a><span class="vs">    &lt;/style&gt;</span></span>
<span id="cb7-343"><a href="#cb7-343" aria-hidden="true" tabindex="-1"></a><span class="vs">  `</span>)<span class="op">;</span></span>
<span id="cb7-344"><a href="#cb7-344" aria-hidden="true" tabindex="-1"></a>  <span class="cf">return</span> form<span class="op">;</span></span>
<span id="cb7-345"><a href="#cb7-345" aria-hidden="true" tabindex="-1"></a>}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<div id="ojs-cell-7" data-nodetype="declaration">

</div>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code hidden" id="cb8" data-startfrom="351" data-source-offset="0"><pre class="sourceCode js code-with-copy"><code class="sourceCode javascript" style="counter-reset: source-line 350;"><span id="cb8-351"><a href="#cb8-351" aria-hidden="true" tabindex="-1"></a><span class="fu">board_div</span>(<span class="st">"board2"</span><span class="op">,</span> <span class="dv">300</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<div id="ojs-cell-8" data-nodetype="expression">

</div>
</div>
</div>
<div class="cell hidden">
<div class="sourceCode cell-code hidden" id="cb9" data-startfrom="357" data-source-offset="0"><pre class="sourceCode js code-with-copy"><code class="sourceCode javascript" style="counter-reset: source-line 356;"><span id="cb9-357"><a href="#cb9-357" aria-hidden="true" tabindex="-1"></a>board2 <span class="op">=</span> <span class="fu">make_board</span>(<span class="st">"board2"</span><span class="op">,</span> <span class="co">/*showSlider=*/</span><span class="kw">true</span><span class="op">,</span> <span class="co">/*sliderValue=*/</span><span class="dv">30</span><span class="op">,</span> <span class="co">/*showP=*/</span><span class="kw">false</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display hidden">
<div id="ojs-cell-9" data-nodetype="declaration">

</div>
</div>
</div>
<p>We arrived at a simplifed version of the problem: a vector <span class="math inline">\(\textbf{a}=[a_x, a_y]\)</span> and a fixed vector <span class="math inline">\(\textbf{b}=[1, 0]\)</span>. Let’s check if the definitions agree now. The algebraic dot product is:</p>
<p><span class="math display">\[
\textbf{a} \cdot \textbf{b} = a_xb_x+a_yb_y=a_x
\]</span></p>
<p>and the geometric is:</p>
<p><span class="math display">\[
\textbf{a} \cdot \textbf{b} = \|\textbf{a}\|\|\textbf{b}\|\cos \theta =  \|\textbf{a}\|\cos \theta
\]</span></p>
<p>now, we have <span class="math inline">\(\textbf{a} \cdot \textbf{b} = a_x =  \|\textbf{a}\|\cos \theta\)</span>. This is correct due to <a href="#two-dimensions">the polar coordinates</a>. Alternatively, we can easily derive from the <a href="https://en.wikipedia.org/wiki/Sine_and_cosine">cosine definition</a>. The proof is left as an exercise to the reader. You can use the visualization below to convince yourself:</p>
<div class="cell">
<div class="sourceCode cell-code hidden" id="cb10" data-startfrom="377" data-source-offset="0"><pre class="sourceCode js code-with-copy"><code class="sourceCode javascript" style="counter-reset: source-line 376;"><span id="cb10-377"><a href="#cb10-377" aria-hidden="true" tabindex="-1"></a><span class="fu">board_div</span>(<span class="st">"board3"</span><span class="op">,</span> <span class="dv">400</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<div id="ojs-cell-10" data-nodetype="expression">

</div>
</div>
</div>
<div class="cell hidden">
<div class="sourceCode cell-code hidden" id="cb11" data-startfrom="383" data-source-offset="0"><pre class="sourceCode js code-with-copy"><code class="sourceCode javascript" style="counter-reset: source-line 382;"><span id="cb11-383"><a href="#cb11-383" aria-hidden="true" tabindex="-1"></a>board3 <span class="op">=</span> <span class="fu">make_board</span>(<span class="st">"board3"</span><span class="op">,</span> <span class="co">/*showSlider=*/</span><span class="kw">false</span><span class="op">,</span> <span class="co">/*sliderValue=*/</span><span class="dv">0</span><span class="op">,</span> <span class="co">/*showP=*/</span><span class="kw">true</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display hidden">
<div id="ojs-cell-11" data-nodetype="declaration">

</div>
</div>
</div>
<p>We introduced <strong>a new vector <span class="math inline">\(\textbf{p}\)</span></strong> in the above visualization:</p>
<ul>
<li>The vector <span class="math inline">\(\textbf{p}\)</span> is visualized with green</li>
<li>It has coordinates <span class="math inline">\(\textbf{p}=[\|\textbf{a}\|\cos \theta, 0]=[a_x, 0]\)</span>:
<ul>
<li>Where <span class="math inline">\(p_x\)</span> is the dot product as we derived above</li>
</ul></li>
<li>The vector <span class="math inline">\(\textbf{p}\)</span> is collinear with the vector <span class="math inline">\(\textbf{b}\)</span></li>
<li>Since the vectors <span class="math inline">\(\textbf{p}\)</span> and <span class="math inline">\(\textbf{b}\)</span> lie along the same line:
<ul>
<li>We can express <span class="math inline">\(\textbf{p}\)</span> using vector arithmetic: <span class="math inline">\(\textbf{p}=(\|\textbf{a}\|\cos \theta)\textbf{b}\)</span></li>
<li><span class="math inline">\(\|\textbf{a}\|\cos \theta\)</span> is a real number, which means how many <span class="math inline">\(\textbf{b}\)</span>`s are required to reach the vector <span class="math inline">\(\textbf{p}\)</span></li>
<li>You can visualize a 1D number line spanned by the vector <span class="math inline">\(\textbf{b}\)</span>, then <span class="math inline">\(\|\textbf{a}\|\cos \theta\)</span> is the location of <span class="math inline">\(\textbf{p}\)</span> in that 1D coordinate system.</li>
</ul></li>
<li><span class="math inline">\(p_x\)</span> can be 0, positive or negative. When negative, the vector <span class="math inline">\(\textbf{p}\)</span> is opposite to the vector <span class="math inline">\(\textbf{b}\)</span></li>
<li>The vector <span class="math inline">\(\textbf{p}\)</span> is actually <a href="https://en.wikipedia.org/wiki/Dot_product#Scalar_projection_and_first_properties">the projection</a> of the vector <span class="math inline">\(\textbf{a}\)</span> into <span class="math inline">\(\textbf{b}\)</span>.</li>
<li>Play with the point <span class="math inline">\(\textbf{a}\)</span> to gain more intuition!</li>
</ul>
<p>Try different values of <span class="math inline">\(\textbf{a}\)</span> by moving it in the visualization, and verify the following questions:</p>
<ul>
<li>When the dot product is zero?</li>
<li>When the dot product is negative ?</li>
<li>When the dot product is positive ?</li>
<li>What values of <span class="math inline">\(\textbf{a}\)</span> result in the same dot product?</li>
</ul>
<p>The simplified form of the dot product is quite useful for intuition. I visualize this version in my mind when I forget some details of the dot product. At this point, you should be comfortable with the dot product of the simplified form: <span class="math inline">\(\textbf{a} \cdot [1, 0]\)</span>.</p>
</section>
<section id="rotational-invariance" class="level3">
<h3 class="anchored" data-anchor-id="rotational-invariance">Rotational invariance</h3>
<p>First, let’s visualize the rotation:</p>
<div class="cell">
<div class="sourceCode cell-code hidden" id="cb12" data-startfrom="416" data-source-offset="0"><pre class="sourceCode js code-with-copy"><code class="sourceCode javascript" style="counter-reset: source-line 415;"><span id="cb12-416"><a href="#cb12-416" aria-hidden="true" tabindex="-1"></a><span class="fu">board_div</span>(<span class="st">"board4"</span><span class="op">,</span> <span class="dv">500</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<div id="ojs-cell-12" data-nodetype="expression">

</div>
</div>
</div>
<div class="cell hidden">
<div class="sourceCode cell-code hidden" id="cb13" data-startfrom="422" data-source-offset="0"><pre class="sourceCode js code-with-copy"><code class="sourceCode javascript" style="counter-reset: source-line 421;"><span id="cb13-422"><a href="#cb13-422" aria-hidden="true" tabindex="-1"></a>board4 <span class="op">=</span> <span class="fu">make_board</span>(<span class="st">"board4"</span><span class="op">,</span> <span class="co">/*showSlider=*/</span><span class="kw">true</span><span class="op">,</span> <span class="co">/*sliderValue=*/</span><span class="dv">10</span><span class="op">,</span> <span class="co">/*showP=*/</span><span class="kw">true</span><span class="op">,</span>  <span class="co">/*showP=*/</span><span class="kw">false</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display hidden">
<div id="ojs-cell-13" data-nodetype="declaration">

</div>
</div>
</div>
<p>There is <strong>a slider</strong> which represents the angle <span class="math inline">\(\alpha\)</span> (in degrees) by which both vectors are rotated. Feel free to play with the slider! You can also interact with the point <span class="math inline">\(\textbf{a}\)</span>.</p>
<p>It is easy to see why the dot product is invariant under rotations from the geometric definition. The geometric definition relies only on the lengths of the vectors, and the lengths don’t change when rotated.</p>
<p>However, it is not immediately clear from the algebraic definition. To prove it, we derive an alternative formula for the algebraic dot product:</p>
<p><span class="math display">\[
\begin{align}
\|\textbf{a}-\textbf{b}\|^2 &amp;= (a_x-b_x)^2 + (a_y-b_y)^2 \\
&amp;= a_x^2 + b_x^2 - 2a_xb_x + a_y^2 + b_y^2 - 2a_yb_y \\
&amp;= (a_x^2 + a_y^2) + (b_x^2 + b_y^2) - 2(a_xb_x + a_yb_y) \\
&amp;= \|\textbf{a}\|^2 + \|\textbf{b}\|^2 - 2 \textbf{a} \cdot \textbf{b}
\end{align}
\]</span></p>
<p>which gives us:</p>
<p><span class="math display">\[
\begin{align}
\textbf{a} \cdot \textbf{b} &amp;= a_xb_x + a_yb_y \\
&amp;= \frac{\|\textbf{a}\|^2 + \|\textbf{b}\|^2 - \|\textbf{a}-\textbf{b}\|^2 }{2}
\end{align}
\]</span></p>
<p>The dot product above is derived purely from the lengths. Since the lengths remain unchanged under rotations, the algebraic dot product remains unchanged as well, which completes our proof.</p>
<p>Note that we derived the <a href="https://en.wikipedia.org/wiki/Law_of_cosines">law of cosine</a>, which is quite cool!</p>
</section>
<section id="general-version" class="level3">
<h3 class="anchored" data-anchor-id="general-version">General version</h3>
<p>It’s not hard to extend the 2D version of the proof to n-dimensional vectors, since we didn’t rely on any properties unique to 2D.</p>
<p>I will provide more alternative proofs below, mostly for myself. They’re optional and collapsed, feel free to read them.</p>
<div class="callout callout-style-default callout-note callout-titled">
<div class="callout-header d-flex align-content-center" data-bs-toggle="collapse" data-bs-target=".callout-2-contents" aria-controls="callout-2" aria-expanded="false" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Alternative Proof 1
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-2" class="callout-2-contents callout-collapse collapse">
<div class="callout-body-container callout-body">
<p>We only scaled the vector <span class="math inline">\(\textbf{b}\)</span> but we can also scale the vector <span class="math inline">\(\textbf{a}\)</span>, so that <span class="math inline">\(\|\textbf{a}\|=1\)</span>. Also switch to the polar coordinates: <span class="math inline">\(\textbf{a}=[\cos \alpha, \sin \alpha]\)</span> and <span class="math inline">\(\textbf{b}=[\cos \beta, \sin \beta]\)</span>.</p>
<p>Then, the geometric dot product is:</p>
<p><span class="math display">\[
\textbf{a} \cdot \textbf{b} = \cos(\alpha - \beta)
\]</span></p>
<p>The algebraic is:</p>
<p><span class="math display">\[
\textbf{a} \cdot \textbf{b} = \cos \alpha \cos \beta + \sin \alpha \sin \beta
\]</span></p>
<p>We arrive at the <a href="https://mathworld.wolfram.com/TrigonometricAdditionFormulas.html">cosine subtraction rule</a>: <span class="math display">\[
\cos(\alpha-\beta)=\cos \alpha \cos \beta + \sin \alpha \sin \beta
\]</span></p>
</div>
</div>
</div>
<div class="callout callout-style-default callout-note callout-titled">
<div class="callout-header d-flex align-content-center" data-bs-toggle="collapse" data-bs-target=".callout-3-contents" aria-controls="callout-3" aria-expanded="false" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Alternative Proof 2
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-3" class="callout-3-contents callout-collapse collapse">
<div class="callout-body-container callout-body">
<p>We will extend the formula from <a href="#rotational-invariance">the rotational invariance</a> section further. We derived the following dot product formula:</p>
<p><span class="math display">\[
\begin{align}
\textbf{a} \cdot \textbf{b} &amp;= \sum_{i=1}^n a_ib_i \\
&amp;= \frac{\|\textbf{a}\|^2 + \|\textbf{b}\|^2 - \|\textbf{a}-\textbf{b}\|^2 }{2}
\end{align}
\]</span></p>
<p>From the <a href="https://en.wikipedia.org/wiki/Law_of_cosines">law of cosine</a>, we also have:</p>
<p><span class="math display">\[
\|\textbf{a}-\textbf{b}\|=\|\textbf{a}\|^2+\|\textbf{b}\|^2-2\|\textbf{a}\|\|\textbf{b}\|\cos \theta
\]</span></p>
<p>if we rearrange and combine the above two equations: <span class="math display">\[
\begin{align}
\|\textbf{a}\|\|\textbf{b}\|\cos \theta =&amp; \textbf{a} \cdot \textbf{b}= \sum_{i=1}^n a_ib_i  \\
=&amp; \frac{\|\textbf{a}\|^2 + \|\textbf{b}\|^2 - \|\textbf{a}-\textbf{b}\|^2 }{2}
\end{align}
\]</span></p>
</div>
</div>
</div>
<div class="callout callout-style-default callout-note callout-titled">
<div class="callout-header d-flex align-content-center" data-bs-toggle="collapse" data-bs-target=".callout-4-contents" aria-controls="callout-4" aria-expanded="false" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Alternative Proof 3
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-4" class="callout-4-contents callout-collapse collapse">
<div class="callout-body-container callout-body">
<p>You can also find more proofs in <a href="https://proofwiki.org/wiki/Cosine_Formula_for_Dot_Product">proofwiki</a>.</p>
</div>
</div>
</div>
</section>
</section>
<section id="the-end" class="level2">
<h2 class="anchored" data-anchor-id="the-end">The End</h2>
<p>I hope you enjoyed this post. You can ask further questions on <a href="https://t.me/swemanml">my telegram channel</a></p>


</section>
</section>

</main> <!-- /main -->
<script type="ojs-module-contents">
eyJjb250ZW50cyI6W3sibWV0aG9kTmFtZSI6ImludGVycHJldCIsImNlbGxOYW1lIjoib2pzLWNlbGwtMSIsImlubGluZSI6ZmFsc2UsInNvdXJjZSI6IkpYRyA9IGF3YWl0IHJlcXVpcmUoJ2h0dHBzOi8vY2RuanMuY2xvdWRmbGFyZS5jb20vYWpheC9saWJzL2pzeGdyYXBoLzEuMTAuMS9qc3hncmFwaGNvcmUuanMnKVxuIn0seyJtZXRob2ROYW1lIjoiaW50ZXJwcmV0IiwiY2VsbE5hbWUiOiJvanMtY2VsbC0yIiwiaW5saW5lIjpmYWxzZSwic291cmNlIjoiXG5mdW5jdGlvbiBib2FyZF9kaXYobmFtZSwgd2lkdGg9NTAwKSB7XG4gIHJldHVybiBodG1sYDxkaXYgXG4gICAgaWQ9JHtuYW1lfSBcbiAgICBzdHlsZT0nbWF4LXdpZHRoOiR7d2lkdGh9cHg7IGFzcGVjdC1yYXRpbzogMTsgXG4gICAgICAgICAgICBtYXJnaW4taW5saW5lOiBhdXRvJz5cbiAgPC9kaXY+YCBcbn1cbiJ9LHsibWV0aG9kTmFtZSI6ImludGVycHJldCIsImNlbGxOYW1lIjoib2pzLWNlbGwtMyIsImlubGluZSI6ZmFsc2UsInNvdXJjZSI6IlxuZnVuY3Rpb24gaW5pdF9ib2FyZChuYW1lLCBleHRlbmQ9NS41KSB7XG4gIHJldHVybiBKWEcuSlNYR3JhcGguaW5pdEJvYXJkKG5hbWUsIHtcbiAgICBib3VuZGluZ2JveDogWy1leHRlbmQsIGV4dGVuZCwgZXh0ZW5kLCAtZXh0ZW5kXSxcbiAgICBzaG93Q29weXJpZ2h0OiBmYWxzZSxcbiAgICBzaG93TmF2aWdhdGlvbjogZmFsc2UsXG4gICAgYXhpczogdHJ1ZSxcbiAgICBncmlkOiBmYWxzZSxcbiAgICBwYW46IHtcbiAgICAgIG5lZWRUd29GaW5nZXJzOiB0cnVlXG4gICAgfSxcbiAgICBkZWZhdWx0QXhlczoge1xuICAgICAgeDoge1xuICAgICAgICB0aWNrczoge1xuICAgICAgICAgIGluc2VydFRpY2tzOiBmYWxzZSxcbiAgICAgICAgICBtaW5vclRpY2tzOiAwLCAgIFxuICAgICAgICAgIG1ham9ySGVpZ2h0OiA1LFxuICAgICAgICAgIHRpY2tzRGlzdGFuY2U6IDEsXG4gICAgICAgICAgc3Ryb2tlT3BhY2l0eTogMC44LFxuICAgICAgICAgIHN0cm9rZUNvbG9yOiAnIzAwMDAwMCcsXG4gICAgICAgICAgc3Ryb2tlV2lkdGg6IDEgXG4gICAgICAgIH1cbiAgICAgIH0sXG4gICAgICB5OiB7XG4gICAgICAgIHRpY2tzOiB7XG4gICAgICAgICAgaW5zZXJ0VGlja3M6IGZhbHNlLFxuICAgICAgICAgIG1pbm9yVGlja3M6IDAsXG4gICAgICAgICAgbWFqb3JIZWlnaHQ6IDUsXG4gICAgICAgICAgc3Ryb2tlT3BhY2l0eTogMC44LFxuICAgICAgICAgIHN0cm9rZUNvbG9yOiAnIzAwMDAwMCcsXG4gICAgICAgICAgc3Ryb2tlV2lkdGg6IDEgXG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9LFxuICB9KTtcbn1cbiJ9LHsibWV0aG9kTmFtZSI6ImludGVycHJldCIsImNlbGxOYW1lIjoib2pzLWNlbGwtNCIsImlubGluZSI6ZmFsc2UsInNvdXJjZSI6IlxuZnVuY3Rpb24gbWFrZV9ib2FyZChcbiAgbmFtZSwgc2hvd1NsaWRlcj10cnVlLCBzbGlkZXJWYWx1ZT0wLjAsIFxuICBzaG93UD10cnVlLCBzaG93UExhYmVsPXRydWVcbikge1xuICBmdW5jdGlvbiB2ZWNfbGVuZ3RoKGEpICB7XG4gICAgcmV0dXJuIE1hdGguc3FydChhWzBdICogYVswXSArIGFbMV0gKiBhWzFdKTtcbiAgfVxuICBmdW5jdGlvbiB2ZWNfdW5pdChhKSB7XG4gICAgY29uc3QgbGVuID0gdmVjX2xlbmd0aChhKTtcbiAgICByZXR1cm4gdmVjX3NjYWxlKGEsIDEgLyBsZW4pO1xuICB9XG4gIGZ1bmN0aW9uIHZlY19zY2FsZShhLCBzY2FsYXIpIHtcbiAgICByZXR1cm4gW2FbMF0gKiBzY2FsYXIsIGFbMV0gKiBzY2FsYXJdO1xuICB9XG4gIGZ1bmN0aW9uIHZlY19kb3QoYSwgYikge1xuICAgIHJldHVybiBhWzBdICogYlswXSArIGFbMV0gKiBiWzFdO1xuICB9XG4gIGZ1bmN0aW9uIHZlY19jcm9zcyhhLCBiKSB7XG4gICAgcmV0dXJuIGFbMF0gKiBiWzFdIC0gYVsxXSAqIGJbMF07XG4gIH1cbiAgZnVuY3Rpb24gdmVjX21pZChhLCBiKSB7XG4gICAgcmV0dXJuIHZlY19zY2FsZSh2ZWNfYWRkKGEsIGIpLCAwLjUpO1xuICB9XG4gIGZ1bmN0aW9uIHZlY19yb3Q5MCh2KSB7XG4gICAgcmV0dXJuIFstdlsxXSwgdlswXV07XG4gIH1cbiAgZnVuY3Rpb24gdmVjX2FkZChhLCBiKSB7XG4gICAgcmV0dXJuIFthWzBdICsgYlswXSwgYVsxXSArIGJbMV1dO1xuICB9XG5cbiAgZnVuY3Rpb24gY2FsY1AoYSwgYikge1xuICAgIGNvbnN0IHVuaXRfYiA9IHZlY191bml0KGIpO1xuICAgIHJldHVybiB2ZWNfc2NhbGUodW5pdF9iLCB2ZWNfZG90KGEsIHVuaXRfYikpO1xuICB9XG5cbiAgZnVuY3Rpb24gY2FsY1VuZGVyKHAsIGEsIGRlbHRhPTAuMDUpIHtcbiAgICB2YXIgbiA9IHZlY19zY2FsZSh2ZWNfcm90OTAocCksIGRlbHRhIC8gdmVjX2xlbmd0aChwKSk7XG4gICAgaWYgKHZlY19jcm9zcyhhLCBwKSA8IDApIHtcbiAgICAgIG4gPSB2ZWNfc2NhbGUobiwgLTEpO1xuICAgIH1cbiAgICByZXR1cm4gW24sIHZlY19hZGQocCwgbildO1xuICB9XG5cbiAgY29uc3QgYSA9IFsyLjUsIDJdO1xuICBjb25zdCBiID0gWzEsIDBdO1xuICBjb25zdCBwID0gW2FbMF0sIDBdO1xuICB2YXIgYm9hcmQgPSBpbml0X2JvYXJkKG5hbWUsIDMuNSk7XG4gIGNvbnN0IHBvaW50YSA9IGJvYXJkLmNyZWF0ZShcInBvaW50XCIsIGEsIHtcbiAgICBmaXhlZDogZmFsc2UsXG4gICAgbmFtZTogXCJhXCIsXG4gICAgY29sb3I6IFwiYmx1ZVwiXG4gIH0pXG4gIGNvbnN0IHBvaW50YiA9IGJvYXJkLmNyZWF0ZShcInBvaW50XCIsIGIsIHtcbiAgICBmaXhlZDogdHJ1ZSxcbiAgICBuYW1lOiBcImJcIixcbiAgICBjb2xvcjogXCJyZWRcIlxuICB9KTtcbiAgY29uc3QgcG9pbnRwID0gYm9hcmQuY3JlYXRlKFwicG9pbnRcIiwgW2Z1bmN0aW9uKCkge1xuICAgIHJldHVybiBjYWxjUChbcG9pbnRhLlgoKSwgcG9pbnRhLlkoKV0sIFtwb2ludGIuWCgpLCBwb2ludGIuWSgpXSlbMF07XG4gIH0sIGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiBjYWxjUChbcG9pbnRhLlgoKSwgcG9pbnRhLlkoKV0sIFtwb2ludGIuWCgpLCBwb2ludGIuWSgpXSlbMV07XG4gIH1dLCB7XG4gICAgdmlzaWJsZTogc2hvd1AsXG4gICAgZml4ZWQ6IHRydWUsXG4gICAgbmFtZTogXCJwXCIsXG4gICAgY29sb3I6IFwiZ3JlZW5cIixcbiAgICBzaXplOiA1LFxuICB9KTtcbiAgY29uc3QgbGluZUdyZWVuID0gYm9hcmQuY3JlYXRlKFwibGluZVwiLCBbZnVuY3Rpb24oKSB7XG4gICAgcmV0dXJuIGNhbGNVbmRlcihbcG9pbnRwLlgoKSwgcG9pbnRwLlkoKV0sIFtwb2ludGEuWCgpLCBwb2ludGEuWSgpXSwgMC4wMylbMF07XG4gIH0sIGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiBjYWxjVW5kZXIoW3BvaW50cC5YKCksIHBvaW50cC5ZKCldLCBbcG9pbnRhLlgoKSwgcG9pbnRhLlkoKV0sIDAuMDMpWzFdO1xuICB9XSwge1xuICAgIHZpc2libGU6IHNob3dQLFxuICAgIGxhc3RBcnJvdzp0cnVlLFxuICAgIGZpeGVkOiB0cnVlLFxuICAgIHN0cmFpZ2h0Rmlyc3Q6ZmFsc2UsIFxuICAgIHN0cmFpZ2h0TGFzdDpmYWxzZSwgXG4gICAgc3Ryb2tlQ29sb3I6IFwiZ3JlZW5cIixcbiAgICBzdHJva2VXaWR0aDogMi41LFxuICAgIGxhYmVsOntvZmZzZXRzOlstMSwxXX1cbiAgfSk7XG4gIGNvbnN0IGxpbmVhID0gYm9hcmQuY3JlYXRlKFwibGluZVwiLCBbWzAsIDBdLCBwb2ludGFdLCB7XG4gICAgZml4ZWQ6IHRydWUsXG4gICAgc3RyYWlnaHRGaXJzdDpmYWxzZSwgXG4gICAgc3RyYWlnaHRMYXN0OmZhbHNlLCBcbiAgICBsYXN0QXJyb3c6dHJ1ZSxcbiAgICBzdHJva2VDb2xvcjogXCJibHVlXCIsXG4gICAgc3Ryb2tlV2lkdGg6IDJcbiAgfSk7XG4gIGNvbnN0IGxpbmViID0gYm9hcmQuY3JlYXRlKFwibGluZVwiLCBbWzAsIDBdLCBwb2ludGJdLCB7XG4gICAgZml4ZWQ6IHRydWUsXG4gICAgc3RyYWlnaHRGaXJzdDpmYWxzZSwgXG4gICAgc3RyYWlnaHRMYXN0OmZhbHNlLCBcbiAgICBsYXN0QXJyb3c6dHJ1ZSxcbiAgICBzdHJva2VDb2xvcjogXCJyZWRcIixcbiAgICBzdHJva2VXaWR0aDogMlxuICB9KTtcblxuICBjb25zdCBsaW5lYXAgPSBib2FyZC5jcmVhdGUoXCJsaW5lXCIsIFtwb2ludGEsIHBvaW50cF0sIHtcbiAgICB2aXNpYmxlOiBzaG93UCxcbiAgICBmaXhlZDogdHJ1ZSxcbiAgICBzdHJhaWdodEZpcnN0OmZhbHNlLCBcbiAgICBzdHJhaWdodExhc3Q6ZmFsc2UsIFxuICAgIGRhc2g6IDIsXG4gICAgc3Ryb2tlQ29sb3I6IFwiYmxhY2tcIixcbiAgICBzdHJva2VXaWR0aDogMVxuICB9KVxuICBjb25zdCByaWdodEFuZ2xlID0gYm9hcmQuY3JlYXRlKFwibm9ucmVmbGV4YW5nbGVcIiwgW3BvaW50YSwgcG9pbnRwLCBwb2ludGJdLCB7XG4gICAgdmlzaWJsZTogc2hvd1AsXG4gICAgbmFtZTogXCJcIixcbiAgICBzdHJva2VDb2xvcjogXCJibGFja1wiLFxuICAgIHN0cm9rZVdpZHRoOiAwLjcsXG4gICAgZmlsbENvbG9yOiBcIiMwMDAwMDAwMFwiLFxuICAgIHJhZGl1czogMC4zXG4gIH0pO1xuICBjb25zdCBwb2ludG8gPSBib2FyZC5jcmVhdGUoXCJwb2ludFwiLCBbMCwgMF0sIHtcbiAgICB2aXNpYmxlOiBmYWxzZSxcbiAgICBmaXhlZDogdHJ1ZSxcbiAgICBuYW1lOiBcIm9cIixcbiAgfSk7XG4gIGNvbnN0IGFscGhhQW5nbGUgPSBib2FyZC5jcmVhdGUoXCJhbmdsZVwiLCBbcG9pbnRiLCBwb2ludG8sIHBvaW50YV0sIHtcbiAgICBuYW1lOiBcIs64XCJcbiAgfSk7XG4gXG4gIGNvbnN0IHNsaWRlciA9IGJvYXJkLmNyZWF0ZSgnc2xpZGVyJywgW1stMSwgLTJdLCBbMSwgLTJdLCBbMCwgc2xpZGVyVmFsdWUsIDM2MF1dLCB7XG4gICAgdmlzaWJsZTogc2hvd1NsaWRlcixcbiAgICBuYW1lOiBcImFscGhhXCIsXG4gICAgc25hcFdpZHRoOiAxXG4gIH0pO1xuICBjb25zdCB0ZXh0ID0gYm9hcmQuY3JlYXRlKCd0ZXh0JywgW2Z1bmN0aW9uKCkge1xuICAgIGNvbnN0IHMgPSBjYWxjVW5kZXIoW3BvaW50cC5YKCksIHBvaW50cC5ZKCldLCBbcG9pbnRhLlgoKSwgcG9pbnRhLlkoKV0sIDAuNCk7XG4gICAgcmV0dXJuIHZlY19taWQoc1swXSwgc1sxXSlbMF07XG4gIH0sIGZ1bmN0aW9uKCkge1xuICAgIGNvbnN0IHMgPSBjYWxjVW5kZXIoW3BvaW50cC5YKCksIHBvaW50cC5ZKCldLCBbcG9pbnRhLlgoKSwgcG9pbnRhLlkoKV0sIDAuNCk7XG4gICAgcmV0dXJuIHZlY19taWQoc1swXSwgc1sxXSlbMV07XG4gIH0sICd8fGF8fGNvcyjOuCknXSwge1xuICAgIHZpc2libGU6IHNob3dQICYmIHNob3dQTGFiZWwsXG4gICAgYW5jaG9yWDogXCJtaWRkbGVcIixcbiAgICBhbmNob3JZOiBcIm1pZGRsZVwiLFxuICAgIC8vIGZvbnRTaXplOiAxNSxcbiAgfSlcbiAgY29uc3Qgcm90ID0gYm9hcmQuY3JlYXRlKCd0cmFuc2Zvcm0nLCBbZnVuY3Rpb24oKXtyZXR1cm4gc2xpZGVyLlZhbHVlKCkgLyAxODAgKiBNYXRoLlBJO30sIFswLCAwXV0sIHt0eXBlOidyb3RhdGUnfSk7XG4gIHJvdC5iaW5kVG8oW3BvaW50YiwgcG9pbnRhXSk7XG4gIHJldHVybiBib2FyZDtcbn1cbiJ9LHsibWV0aG9kTmFtZSI6ImludGVycHJldCIsImNlbGxOYW1lIjoib2pzLWNlbGwtNSIsImlubGluZSI6ZmFsc2UsInNvdXJjZSI6ImJvYXJkX2RpdihcImJvYXJkMVwiLCAzMDApXG4ifSx7Im1ldGhvZE5hbWUiOiJpbnRlcnByZXQiLCJjZWxsTmFtZSI6Im9qcy1jZWxsLTYiLCJpbmxpbmUiOmZhbHNlLCJzb3VyY2UiOiIgXG5ib2FyZDEgPSBtYWtlX2JvYXJkKFwiYm9hcmQxXCIsIC8qc2hvd1NsaWRlcj0qL2ZhbHNlLCAvKnNsaWRlclZhbHVlPSovMzAsIC8qc2hvd1A9Ki9mYWxzZSlcbiJ9LHsibWV0aG9kTmFtZSI6ImludGVycHJldCIsImNlbGxOYW1lIjoib2pzLWNlbGwtNyIsImlubGluZSI6ZmFsc2UsInNvdXJjZSI6IiBcbnZpZXdvZiBteWJ1dHRvbiA9IHtcbiAgY29uc3QgZm9ybSA9IElucHV0cy5idXR0b24oXCJQbGF5IHRvIFJvdGF0ZVwiLCB7dmFsdWU6IG51bGwsIHJlZHVjZTogKCkgPT4ge1xuICAgIHZhciBzbGlkZXIgPSBib2FyZDIuZWxlbWVudHNCeU5hbWVbXCJhbHBoYVwiXTtcbiAgICBmdW5jdGlvbiB1cGRhdGVSb3RhdGUoKSB7XG4gICAgICBpZiAoc2xpZGVyLlZhbHVlKCkgPT0gMCkge1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG4gICAgICBzbGlkZXIuc2V0VmFsdWUoTWF0aC5tYXgoMCwgc2xpZGVyLlZhbHVlKCkgLSAxKSk7XG4gICAgICBib2FyZDIudXBkYXRlKCk7XG4gICAgICBzZXRUaW1lb3V0KHVwZGF0ZVJvdGF0ZSwgMTIpO1xuICAgIH1cbiAgICBpZiAoc2xpZGVyLlZhbHVlKCkgPT0gMCkge1xuICAgICAgc2xpZGVyLnNldFZhbHVlKDM1OSk7XG4gICAgfVxuICAgIHVwZGF0ZVJvdGF0ZSgpO1xuICB9fSk7XG4gIGNvbnN0IHNjb3BlID0gRE9NLnVpZCgpLmlkO1xuICBjb25zdCBjbHMgPSBmb3JtLmNsYXNzTGlzdFswXTtcbiAgZm9ybS5jbGFzc0xpc3QuYWRkKHNjb3BlKTtcbiAgZm9ybS5hcHBlbmQoaHRtbGA8c3R5bGU+XG4gICAgLiR7Y2xzfSA+IGJ1dHRvbiB7IGNvbG9yOiB3aGl0ZSB9XG4gICAgPC9zdHlsZT5cbiAgYCk7XG4gIHJldHVybiBmb3JtO1xufVxuIn0seyJtZXRob2ROYW1lIjoiaW50ZXJwcmV0IiwiY2VsbE5hbWUiOiJvanMtY2VsbC04IiwiaW5saW5lIjpmYWxzZSwic291cmNlIjoiYm9hcmRfZGl2KFwiYm9hcmQyXCIsIDMwMClcbiJ9LHsibWV0aG9kTmFtZSI6ImludGVycHJldCIsImNlbGxOYW1lIjoib2pzLWNlbGwtOSIsImlubGluZSI6ZmFsc2UsInNvdXJjZSI6IiBcbmJvYXJkMiA9IG1ha2VfYm9hcmQoXCJib2FyZDJcIiwgLypzaG93U2xpZGVyPSovdHJ1ZSwgLypzbGlkZXJWYWx1ZT0qLzMwLCAvKnNob3dQPSovZmFsc2UpXG4ifSx7Im1ldGhvZE5hbWUiOiJpbnRlcnByZXQiLCJjZWxsTmFtZSI6Im9qcy1jZWxsLTEwIiwiaW5saW5lIjpmYWxzZSwic291cmNlIjoiYm9hcmRfZGl2KFwiYm9hcmQzXCIsIDQwMClcbiJ9LHsibWV0aG9kTmFtZSI6ImludGVycHJldCIsImNlbGxOYW1lIjoib2pzLWNlbGwtMTEiLCJpbmxpbmUiOmZhbHNlLCJzb3VyY2UiOiIgXG5ib2FyZDMgPSBtYWtlX2JvYXJkKFwiYm9hcmQzXCIsIC8qc2hvd1NsaWRlcj0qL2ZhbHNlLCAvKnNsaWRlclZhbHVlPSovMCwgLypzaG93UD0qL3RydWUpXG4ifSx7Im1ldGhvZE5hbWUiOiJpbnRlcnByZXQiLCJjZWxsTmFtZSI6Im9qcy1jZWxsLTEyIiwiaW5saW5lIjpmYWxzZSwic291cmNlIjoiYm9hcmRfZGl2KFwiYm9hcmQ0XCIsIDUwMClcbiJ9LHsibWV0aG9kTmFtZSI6ImludGVycHJldCIsImNlbGxOYW1lIjoib2pzLWNlbGwtMTMiLCJpbmxpbmUiOmZhbHNlLCJzb3VyY2UiOiIgXG5ib2FyZDQgPSBtYWtlX2JvYXJkKFwiYm9hcmQ0XCIsIC8qc2hvd1NsaWRlcj0qL3RydWUsIC8qc2xpZGVyVmFsdWU9Ki8xMCwgLypzaG93UD0qL3RydWUsICAvKnNob3dQPSovZmFsc2UpXG4ifSx7Im1ldGhvZE5hbWUiOiJpbnRlcnByZXRRdWlldCIsInNvdXJjZSI6InNoaW55SW5wdXQoJ215YnV0dG9uJykifV19
</script>
<script type="module">
if (window.location.protocol === "file:") { alert("The OJS runtime does not work with file:// URLs. Please use a web server to view this document."); }
window._ojs.paths.runtimeToDoc = "../../posts/dot-product";
window._ojs.paths.runtimeToRoot = "../..";
window._ojs.paths.docToRoot = "../..";
window._ojs.selfContained = false;
window._ojs.runtime.interpretFromScriptTags();
</script>
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const onCopySuccess = function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  }
  const getTextToCopy = function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
    text: getTextToCopy
  });
  clipboard.on('success', onCopySuccess);
  if (window.document.getElementById('quarto-embedded-source-code-modal')) {
    // For code content inside modals, clipBoardJS needs to be initialized with a container option
    // TODO: Check when it could be a function (https://github.com/zenorocha/clipboard.js/issues/860)
    const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
      text: getTextToCopy,
      container: window.document.getElementById('quarto-embedded-source-code-modal')
    });
    clipboardModal.on('success', onCopySuccess);
  }
    var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
    var mailtoRegex = new RegExp(/^mailto:/);
      var filterRegex = new RegExp("https:\/\/maitbayev\.github\.io");
    var isInternal = (href) => {
        return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
    }
    // Inspect non-navigation links and adorn them if external
 	var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
    for (var i=0; i<links.length; i++) {
      const link = links[i];
      if (!isInternal(link.href)) {
        // undo the damage that might have been done by quarto-nav.js in the case of
        // links that we want to consider external
        if (link.dataset.originalHref !== undefined) {
          link.href = link.dataset.originalHref;
        }
      }
    }
  function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
    const config = {
      allowHTML: true,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start',
    };
    if (contentFn) {
      config.content = contentFn;
    }
    if (onTriggerFn) {
      config.onTrigger = onTriggerFn;
    }
    if (onUntriggerFn) {
      config.onUntrigger = onUntriggerFn;
    }
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      if (note) {
        return note.innerHTML;
      } else {
        return "";
      }
    });
  }
  const xrefs = window.document.querySelectorAll('a.quarto-xref');
  const processXRef = (id, note) => {
    // Strip column container classes
    const stripColumnClz = (el) => {
      el.classList.remove("page-full", "page-columns");
      if (el.children) {
        for (const child of el.children) {
          stripColumnClz(child);
        }
      }
    }
    stripColumnClz(note)
    if (id === null || id.startsWith('sec-')) {
      // Special case sections, only their first couple elements
      const container = document.createElement("div");
      if (note.children && note.children.length > 2) {
        container.appendChild(note.children[0].cloneNode(true));
        for (let i = 1; i < note.children.length; i++) {
          const child = note.children[i];
          if (child.tagName === "P" && child.innerText === "") {
            continue;
          } else {
            container.appendChild(child.cloneNode(true));
            break;
          }
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(container);
        }
        return container.innerHTML
      } else {
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        return note.innerHTML;
      }
    } else {
      // Remove any anchor links if they are present
      const anchorLink = note.querySelector('a.anchorjs-link');
      if (anchorLink) {
        anchorLink.remove();
      }
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(note);
      }
      // TODO in 1.5, we should make sure this works without a callout special case
      if (note.classList.contains("callout")) {
        return note.outerHTML;
      } else {
        return note.innerHTML;
      }
    }
  }
  for (var i=0; i<xrefs.length; i++) {
    const xref = xrefs[i];
    tippyHover(xref, undefined, function(instance) {
      instance.disable();
      let url = xref.getAttribute('href');
      let hash = undefined; 
      if (url.startsWith('#')) {
        hash = url;
      } else {
        try { hash = new URL(url).hash; } catch {}
      }
      if (hash) {
        const id = hash.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note !== null) {
          try {
            const html = processXRef(id, note.cloneNode(true));
            instance.setContent(html);
          } finally {
            instance.enable();
            instance.show();
          }
        } else {
          // See if we can fetch this
          fetch(url.split('#')[0])
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.getElementById(id);
            if (note !== null) {
              const html = processXRef(id, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      } else {
        // See if we can fetch a full url (with no hash to target)
        // This is a special case and we should probably do some content thinning / targeting
        fetch(url)
        .then(res => res.text())
        .then(html => {
          const parser = new DOMParser();
          const htmlDoc = parser.parseFromString(html, "text/html");
          const note = htmlDoc.querySelector('main.content');
          if (note !== null) {
            // This should only happen for chapter cross references
            // (since there is no id in the URL)
            // remove the first header
            if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
              note.children[0].remove();
            }
            const html = processXRef(null, note);
            instance.setContent(html);
          } 
        }).finally(() => {
          instance.enable();
          instance.show();
        });
      }
    }, function(instance) {
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            div.style.left = 0;
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
        // Handle positioning of the toggle
    window.addEventListener(
      "resize",
      throttle(() => {
        elRect = undefined;
        if (selectedAnnoteEl) {
          selectCodeLines(selectedAnnoteEl);
        }
      }, 10)
    );
    function throttle(fn, ms) {
    let throttle = false;
    let timer;
      return (...args) => {
        if(!throttle) { // first call gets through
            fn.apply(this, args);
            throttle = true;
        } else { // all the others get throttled
            if(timer) clearTimeout(timer); // cancel #2
            timer = setTimeout(() => {
              fn.apply(this, args);
              timer = throttle = false;
            }, ms);
        }
      };
    }
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->




</body></html>